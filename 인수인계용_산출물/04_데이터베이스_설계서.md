# ì¸ìˆ˜ì¸ê³„ìš© ì‚°ì¶œë¬¼ 04: ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„ì„œ

**ë¬¸ì„œ ë²„ì „**: 1.0
**ìž‘ì„±ì¼**: 2025-12-08
**í”„ë¡œì íŠ¸ëª…**: AI CS ì‹œìŠ¤í…œ
**DBMS**: PostgreSQL 15 (Supabase)

---

## ðŸ“‹ ëª©ì°¨

1. [ë°ì´í„°ë² ì´ìŠ¤ ê°œìš”](#1-ë°ì´í„°ë² ì´ìŠ¤-ê°œìš”)
2. [ERD (Entity Relationship Diagram)](#2-erd-entity-relationship-diagram)
3. [í…Œì´ë¸” ëª…ì„¸](#3-í…Œì´ë¸”-ëª…ì„¸)
4. [ì¸ë±ìŠ¤ ì„¤ê³„](#4-ì¸ë±ìŠ¤-ì„¤ê³„)
5. [ì œì•½ ì¡°ê±´](#5-ì œì•½-ì¡°ê±´)
6. [ë°ì´í„° íƒ€ìž… ë° ê·œì¹™](#6-ë°ì´í„°-íƒ€ìž…-ë°-ê·œì¹™)
7. [ë°±ì—… ë° ë³µêµ¬](#7-ë°±ì—…-ë°-ë³µêµ¬)

---

## 1. ë°ì´í„°ë² ì´ìŠ¤ ê°œìš”

### 1.1 ë°ì´í„°ë² ì´ìŠ¤ ì •ë³´

| í•­ëª© | ë‚´ìš© |
|------|------|
| DBMS | PostgreSQL 15 |
| í˜¸ìŠ¤íŒ… | Supabase Cloud |
| ë¦¬ì „ | ap-northeast-1 (Tokyo) |
| ì—°ê²° URL | https://uewhvekfjjvxoioklzza.supabase.co |
| ë¬¸ìž ì¸ì½”ë”© | UTF-8 |
| íƒ€ìž„ì¡´ | UTC |

### 1.2 í™•ìž¥ ê¸°ëŠ¥ (Extensions)

```sql
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";  -- UUID ìƒì„±
CREATE EXTENSION IF NOT EXISTS "pg_trgm";    -- í…ìŠ¤íŠ¸ ê²€ìƒ‰ ìµœì í™”
```

### 1.3 í…Œì´ë¸” ëª©ë¡

#### í•µì‹¬ í…Œì´ë¸” (Core Tables)

| ë²ˆí˜¸ | í…Œì´ë¸”ëª… | ì„¤ëª… | ë ˆì½”ë“œ ìˆ˜ (ì˜ˆìƒ) |
|------|----------|------|------------------|
| 1 | channels | ì±„ë„ ì •ë³´ | ~10 |
| 2 | platforms | í”Œëž«í¼ ì •ë³´ | ~10 |
| 3 | brands | ë¸Œëžœë“œ ì •ë³´ | ~10 |
| 4 | live_broadcasts | ë¼ì´ë¸Œ ë°©ì†¡ ê¸°ë³¸ ì •ë³´ | ~1,000/ì›” |
| 5 | live_products | ë¼ì´ë¸Œ ìƒí’ˆ ì •ë³´ | ~18,000/ì›” |
| 6 | live_coupons | ì¿ í° ì •ë³´ | ~1,000/ì›” |
| 7 | live_benefits | í˜œíƒ ì •ë³´ | ~3,000/ì›” |
| 8 | live_comments | ëŒ“ê¸€ ì •ë³´ | ~6,000/ì›” |
| 9 | live_faqs | FAQ ì •ë³´ | ~3,000/ì›” |
| 10 | live_intro | ë¼ì´ë¸Œ ì†Œê°œ | ~1,000/ì›” |
| 11 | live_statistics | í†µê³„ ì •ë³´ | ~1,000/ì›” |
| 12 | live_images | ì´ë¯¸ì§€ ì •ë³´ | ~6,000/ì›” |

#### ì§€ì› í…Œì´ë¸” (Support Tables)

| ë²ˆí˜¸ | í…Œì´ë¸”ëª… | ì„¤ëª… | ë ˆì½”ë“œ ìˆ˜ (ì˜ˆìƒ) |
|------|----------|------|------------------|
| 13 | cs_response_scripts | CS ì‘ë‹µ ìŠ¤í¬ë¦½íŠ¸ | ~100 |
| 14 | expected_customer_questions | ì˜ˆìƒ ê³ ê° ì§ˆë¬¸ | ~500 |
| 15 | risk_points | ë¦¬ìŠ¤í¬ í¬ì¸íŠ¸ | ~200 |

### 1.4 ë°ì´í„°ë² ì´ìŠ¤ í¬ê¸° (ì˜ˆìƒ)

- **í˜„ìž¬**: ~50 MB
- **1ê°œì›” í›„**: ~500 MB
- **1ë…„ í›„**: ~5 GB

---

## 2. ERD (Entity Relationship Diagram)

### 2.1 í•µì‹¬ ì—”í‹°í‹° ê´€ê³„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    channels     â”‚
â”‚  (ì±„ë„ ì •ë³´)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           live_broadcasts                       â”‚
â”‚         (ë¼ì´ë¸Œ ë°©ì†¡ ê¸°ë³¸ ì •ë³´)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ N       â”‚ N       â”‚ N       â”‚ N       â”‚ N       â”‚ N       â”‚ N
         â”‚         â”‚         â”‚         â”‚         â”‚         â”‚         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â” â”Œâ”€â”€â”€â”´â”€â”€â”€â”
â”‚  live_    â”‚ â”‚ live_ â”‚ â”‚ live_ â”‚ â”‚ live_ â”‚ â”‚ live_ â”‚ â”‚ live_ â”‚ â”‚ live_ â”‚
â”‚ products  â”‚ â”‚couponsâ”‚ â”‚benefitsâ”‚ â”‚commentsâ”‚ â”‚ faqs â”‚ â”‚ intro â”‚ â”‚statisticsâ”‚
â”‚(ìƒí’ˆ ì •ë³´)â”‚ â”‚(ì¿ í°) â”‚ â”‚(í˜œíƒ)  â”‚ â”‚(ëŒ“ê¸€)  â”‚ â”‚(FAQ) â”‚ â”‚(ì†Œê°œ) â”‚ â”‚(í†µê³„) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   platforms     â”‚
â”‚  (í”Œëž«í¼ ì •ë³´)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     brands      â”‚
â”‚  (ë¸Œëžœë“œ ì •ë³´)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  cs_response_scripts    â”‚
â”‚  (CS ì‘ë‹µ ìŠ¤í¬ë¦½íŠ¸)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1
         â”‚
         â”‚ N
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ expected_customer_questions  â”‚
â”‚    (ì˜ˆìƒ ê³ ê° ì§ˆë¬¸)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  risk_points    â”‚
â”‚ (ë¦¬ìŠ¤í¬ í¬ì¸íŠ¸)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ê´€ê³„ ì„¤ëª…

| ê´€ê³„ | ì¹´ë””ë„ë¦¬í‹° | ì„¤ëª… |
|------|-----------|------|
| channels â†’ live_broadcasts | 1:N | í•˜ë‚˜ì˜ ì±„ë„ì€ ì—¬ëŸ¬ ë¼ì´ë¸Œ ë°©ì†¡ì„ ê°€ì§ |
| live_broadcasts â†’ live_products | 1:N | í•˜ë‚˜ì˜ ë¼ì´ë¸ŒëŠ” ì—¬ëŸ¬ ìƒí’ˆì„ ê°€ì§ |
| live_broadcasts â†’ live_coupons | 1:N | í•˜ë‚˜ì˜ ë¼ì´ë¸ŒëŠ” ì—¬ëŸ¬ ì¿ í°ì„ ê°€ì§ |
| live_broadcasts â†’ live_benefits | 1:N | í•˜ë‚˜ì˜ ë¼ì´ë¸ŒëŠ” ì—¬ëŸ¬ í˜œíƒì„ ê°€ì§ |
| live_broadcasts â†’ live_comments | 1:N | í•˜ë‚˜ì˜ ë¼ì´ë¸ŒëŠ” ì—¬ëŸ¬ ëŒ“ê¸€ì„ ê°€ì§ |
| live_broadcasts â†’ live_faqs | 1:N | í•˜ë‚˜ì˜ ë¼ì´ë¸ŒëŠ” ì—¬ëŸ¬ FAQë¥¼ ê°€ì§ |
| live_broadcasts â†’ live_intro | 1:1 | í•˜ë‚˜ì˜ ë¼ì´ë¸ŒëŠ” í•˜ë‚˜ì˜ ì†Œê°œë¥¼ ê°€ì§ |
| live_broadcasts â†’ live_statistics | 1:1 | í•˜ë‚˜ì˜ ë¼ì´ë¸ŒëŠ” í•˜ë‚˜ì˜ í†µê³„ë¥¼ ê°€ì§ |
| cs_response_scripts â†’ expected_customer_questions | 1:N | í•˜ë‚˜ì˜ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì—¬ëŸ¬ ì§ˆë¬¸ê³¼ ì—°ê²° |

---

## 3. í…Œì´ë¸” ëª…ì„¸

### 3.1 channels (ì±„ë„ ì •ë³´)

**ì„¤ëª…**: ë¼ì´ë¸Œ ì‡¼í•‘ ì±„ë„ ì •ë³´

**Primary Key**: `channel_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| channel_id | SERIAL | NO | AUTO | ì±„ë„ ID (PK) |
| channel_code | VARCHAR(50) | NO | - | ì±„ë„ ì½”ë“œ (UK) |
| channel_name | VARCHAR(100) | NO | - | ì±„ë„ëª… |
| channel_type | VARCHAR(20) | NO | - | ì±„ë„ íƒ€ìž… (DIRECT/PARTNER/LIVE) |
| base_url | TEXT | NO | - | ê¸°ë³¸ URL |
| crawl_interval | INTEGER | YES | 360 | í¬ë¡¤ë§ ì£¼ê¸° (ë¶„) |
| is_active | BOOLEAN | YES | TRUE | í™œì„± ì—¬ë¶€ |
| icon_url | TEXT | YES | - | ì•„ì´ì½˜ URL |
| description | TEXT | YES | - | ì„¤ëª… |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |
| updated_at | TIMESTAMPTZ | YES | NOW() | ìˆ˜ì • ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
UNIQUE (channel_code)
CHECK (channel_type IN ('DIRECT', 'PARTNER', 'LIVE'))
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_channels_code ON channels(channel_code);
CREATE INDEX idx_channels_type ON channels(channel_type);
```

**ìƒ˜í”Œ ë°ì´í„°**:
```sql
INSERT INTO channels (channel_code, channel_name, channel_type, base_url, crawl_interval) VALUES
('NAVER', 'ë„¤ì´ë²„', 'LIVE', 'https://shoppinglive.naver.com', 60),
('KAKAO', 'ì¹´ì¹´ì˜¤', 'LIVE', 'https://shoppinglive.kakao.com', 60);
```

---

### 3.2 platforms (í”Œëž«í¼ ì •ë³´)

**ì„¤ëª…**: í”Œëž«í¼ ì •ë³´ (ë„¤ì´ë²„ ì‡¼í•‘ë¼ì´ë¸Œ, ì¹´ì¹´ì˜¤ ì‡¼í•‘ë¼ì´ë¸Œ ë“±)

**Primary Key**: `platform_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| platform_id | UUID | NO | uuid_generate_v4() | í”Œëž«í¼ ID (PK) |
| platform_code | VARCHAR(50) | NO | - | í”Œëž«í¼ ì½”ë“œ (UK) |
| platform_name | VARCHAR(100) | NO | - | í”Œëž«í¼ëª… |
| platform_url | TEXT | NO | - | í”Œëž«í¼ URL |
| is_active | BOOLEAN | YES | TRUE | í™œì„± ì—¬ë¶€ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |
| updated_at | TIMESTAMPTZ | YES | NOW() | ìˆ˜ì • ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
UNIQUE (platform_code)
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_platforms_code ON platforms(platform_code);
CREATE INDEX idx_platforms_active ON platforms(is_active);
```

---

### 3.3 brands (ë¸Œëžœë“œ ì •ë³´)

**ì„¤ëª…**: í™”ìž¥í’ˆ ë¸Œëžœë“œ ì •ë³´

**Primary Key**: `brand_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| brand_id | UUID | NO | uuid_generate_v4() | ë¸Œëžœë“œ ID (PK) |
| brand_code | VARCHAR(50) | NO | - | ë¸Œëžœë“œ ì½”ë“œ (UK) |
| brand_name | VARCHAR(100) | NO | - | ë¸Œëžœë“œëª… |
| brand_name_en | VARCHAR(100) | YES | - | ë¸Œëžœë“œëª… (ì˜ë¬¸) |
| is_active | BOOLEAN | YES | TRUE | í™œì„± ì—¬ë¶€ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |
| updated_at | TIMESTAMPTZ | YES | NOW() | ìˆ˜ì • ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
UNIQUE (brand_code)
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_brands_code ON brands(brand_code);
CREATE INDEX idx_brands_active ON brands(is_active);
```

**ìƒ˜í”Œ ë°ì´í„°**:
```sql
INSERT INTO brands (brand_code, brand_name, brand_name_en) VALUES
('LANEIGE', 'ë¼ë„¤ì¦ˆ', 'LANEIGE'),
('SULWHASOO', 'ì„¤í™”ìˆ˜', 'SULWHASOO'),
('IOPE', 'ì•„ì´ì˜¤íŽ˜', 'IOPE');
```

---

### 3.4 live_broadcasts (ë¼ì´ë¸Œ ë°©ì†¡ ê¸°ë³¸ ì •ë³´)

**ì„¤ëª…**: ë¼ì´ë¸Œ ì‡¼í•‘ ë°©ì†¡ì˜ ê¸°ë³¸ ì •ë³´

**Primary Key**: `live_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| live_id | VARCHAR(255) | NO | - | ë¼ì´ë¸Œ ID (PK) |
| channel_id | INTEGER | YES | - | ì±„ë„ ID (FK) |
| channel_code | VARCHAR(50) | NO | - | ì±„ë„ ì½”ë“œ |
| platform_name | VARCHAR(50) | NO | - | í”Œëž«í¼ëª… |
| brand_name | VARCHAR(100) | NO | - | ë¸Œëžœë“œëª… |
| live_title_customer | VARCHAR(500) | NO | - | ë¼ì´ë¸Œ ì œëª© (ê³ ê°ìš©) |
| live_title_cs | VARCHAR(500) | YES | - | ë¼ì´ë¸Œ ì œëª© (CSìš©) |
| source_url | TEXT | NO | - | ì›ë³¸ URL |
| thumbnail_url | TEXT | YES | - | ì¸ë„¤ì¼ URL |
| broadcast_date | DATE | NO | - | ë°©ì†¡ ë‚ ì§œ |
| broadcast_start_time | TIME | YES | - | ë°©ì†¡ ì‹œìž‘ ì‹œê°„ |
| broadcast_end_time | TIME | YES | - | ë°©ì†¡ ì¢…ë£Œ ì‹œê°„ |
| benefit_valid_type | VARCHAR(50) | YES | - | í˜œíƒ ìœ íš¨ íƒ€ìž… |
| benefit_start_datetime | TIMESTAMPTZ | YES | - | í˜œíƒ ì‹œìž‘ ì¼ì‹œ |
| benefit_end_datetime | TIMESTAMPTZ | YES | - | í˜œíƒ ì¢…ë£Œ ì¼ì‹œ |
| broadcast_type | VARCHAR(50) | YES | - | ë°©ì†¡ íƒ€ìž… |
| status | VARCHAR(20) | YES | 'PENDING' | ìƒíƒœ |
| collected_at | TIMESTAMPTZ | YES | - | ìˆ˜ì§‘ ì¼ì‹œ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |
| updated_at | TIMESTAMPTZ | YES | NOW() | ìˆ˜ì • ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
FOREIGN KEY (channel_id) REFERENCES channels(channel_id) ON DELETE CASCADE
CHECK (status IN ('PENDING', 'ACTIVE', 'ENDED', 'CANCELLED'))
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_live_broadcasts_channel ON live_broadcasts(channel_id);
CREATE INDEX idx_live_broadcasts_status ON live_broadcasts(status);
CREATE INDEX idx_live_broadcasts_date ON live_broadcasts(broadcast_date);
CREATE INDEX idx_live_broadcasts_brand ON live_broadcasts(brand_name);
CREATE INDEX idx_live_broadcasts_platform ON live_broadcasts(platform_name);
```

**ì˜ˆì‹œ ë°ì´í„°**:
```sql
INSERT INTO live_broadcasts (
  live_id, channel_code, platform_name, brand_name, 
  live_title_customer, source_url, broadcast_date, status
) VALUES (
  'REAL_NAVER_ë¼ë„¤ì¦ˆ_1744150',
  'NAVER',
  'ë„¤ì´ë²„ ì‡¼í•‘ë¼ì´ë¸Œ',
  'ë¼ë„¤ì¦ˆ',
  'ë¼ë„¤ì¦ˆ í¬ë¦¼ìŠ¤í‚¨ ë¦¬í•„ ê¸°íšì „',
  'https://view.shoppinglive.naver.com/replays/1744150',
  '2025-12-08',
  'ACTIVE'
);
```

---

### 3.5 live_products (ë¼ì´ë¸Œ ìƒí’ˆ ì •ë³´)

**ì„¤ëª…**: ë¼ì´ë¸Œ ë°©ì†¡ì—ì„œ íŒë§¤í•˜ëŠ” ìƒí’ˆ ì •ë³´

**Primary Key**: `product_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| product_id | SERIAL | NO | AUTO | ìƒí’ˆ ID (PK) |
| live_id | VARCHAR(255) | NO | - | ë¼ì´ë¸Œ ID (FK) |
| product_order | INTEGER | YES | 0 | ìƒí’ˆ ìˆœì„œ |
| product_name | VARCHAR(500) | NO | - | ìƒí’ˆëª… |
| sku | VARCHAR(100) | YES | - | SKU |
| original_price | VARCHAR(100) | YES | - | ì •ê°€ |
| sale_price | VARCHAR(100) | YES | - | íŒë§¤ê°€ |
| discount_rate | VARCHAR(50) | YES | - | í• ì¸ìœ¨ |
| product_type | VARCHAR(100) | YES | - | ìƒí’ˆ íƒ€ìž… |
| stock_info | VARCHAR(200) | YES | - | ìž¬ê³  ì •ë³´ |
| set_composition | TEXT | YES | - | ì„¸íŠ¸ êµ¬ì„± |
| product_url | TEXT | YES | - | ìƒí’ˆ URL |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
FOREIGN KEY (live_id) REFERENCES live_broadcasts(live_id) ON DELETE CASCADE
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_live_products_live ON live_products(live_id);
CREATE INDEX idx_live_products_order ON live_products(live_id, product_order);
```

**ì˜ˆì‹œ ë°ì´í„°**:
```sql
INSERT INTO live_products (
  live_id, product_order, product_name, 
  original_price, sale_price, discount_rate
) VALUES (
  'REAL_NAVER_ë¼ë„¤ì¦ˆ_1744150',
  1,
  'í¬ë¦¼ìŠ¤í‚¨ ë¦¬í•„ ì„¸íŠ¸',
  '70000',
  '49000',
  '30%'
);
```

---

### 3.6 live_coupons (ì¿ í° ì •ë³´)

**ì„¤ëª…**: ë¼ì´ë¸Œ ë°©ì†¡ì—ì„œ ì œê³µí•˜ëŠ” ì¿ í° ì •ë³´

**Primary Key**: `coupon_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| coupon_id | SERIAL | NO | AUTO | ì¿ í° ID (PK) |
| live_id | VARCHAR(255) | NO | - | ë¼ì´ë¸Œ ID (FK) |
| coupon_name | VARCHAR(500) | NO | - | ì¿ í°ëª… |
| discount_type | VARCHAR(50) | YES | - | í• ì¸ íƒ€ìž… (AMOUNT/RATE) |
| discount_value | VARCHAR(100) | YES | - | í• ì¸ ê°’ |
| min_purchase_amount | VARCHAR(100) | YES | - | ìµœì†Œ êµ¬ë§¤ ê¸ˆì•¡ |
| valid_from | TIMESTAMPTZ | YES | - | ìœ íš¨ ì‹œìž‘ ì¼ì‹œ |
| valid_until | TIMESTAMPTZ | YES | - | ìœ íš¨ ì¢…ë£Œ ì¼ì‹œ |
| usage_limit | INTEGER | YES | - | ì‚¬ìš© ì œí•œ |
| coupon_code | VARCHAR(100) | YES | - | ì¿ í° ì½”ë“œ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
FOREIGN KEY (live_id) REFERENCES live_broadcasts(live_id) ON DELETE CASCADE
CHECK (discount_type IN ('AMOUNT', 'RATE'))
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_live_coupons_live ON live_coupons(live_id);
CREATE INDEX idx_live_coupons_valid ON live_coupons(valid_from, valid_until);
```

---

### 3.7 live_benefits (í˜œíƒ ì •ë³´)

**ì„¤ëª…**: ë¼ì´ë¸Œ ë°©ì†¡ì˜ í˜œíƒ ì •ë³´ (ì‚¬ì€í’ˆ, ë¬´ë£Œë°°ì†¡ ë“±)

**Primary Key**: `benefit_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| benefit_id | SERIAL | NO | AUTO | í˜œíƒ ID (PK) |
| live_id | VARCHAR(255) | NO | - | ë¼ì´ë¸Œ ID (FK) |
| benefit_type | VARCHAR(50) | NO | - | í˜œíƒ íƒ€ìž… |
| benefit_name | VARCHAR(500) | YES | - | í˜œíƒëª… |
| benefit_detail | TEXT | YES | - | í˜œíƒ ìƒì„¸ |
| benefit_condition | TEXT | YES | - | í˜œíƒ ì¡°ê±´ |
| benefit_valid_period | TEXT | YES | - | ìœ íš¨ ê¸°ê°„ |
| quantity_limit | VARCHAR(200) | YES | - | ìˆ˜ëŸ‰ ì œí•œ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
FOREIGN KEY (live_id) REFERENCES live_broadcasts(live_id) ON DELETE CASCADE
CHECK (benefit_type IN ('í• ì¸', 'ì‚¬ì€í’ˆ', 'ì¿ í°', 'í¬ì¸íŠ¸', 'ë°°ì†¡'))
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_live_benefits_live ON live_benefits(live_id);
CREATE INDEX idx_live_benefits_type ON live_benefits(live_id, benefit_type);
```

---

### 3.8 live_comments (ëŒ“ê¸€ ì •ë³´)

**ì„¤ëª…**: ë¼ì´ë¸Œ ë°©ì†¡ì˜ ëŒ“ê¸€ ì •ë³´

**Primary Key**: `comment_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| comment_id | SERIAL | NO | AUTO | ëŒ“ê¸€ ID (PK) |
| live_id | VARCHAR(255) | NO | - | ë¼ì´ë¸Œ ID (FK) |
| author | VARCHAR(100) | YES | - | ìž‘ì„±ìž |
| content | TEXT | NO | - | ëŒ“ê¸€ ë‚´ìš© |
| rating | INTEGER | YES | - | í‰ì  (1-5) |
| like_count | INTEGER | YES | 0 | ì¢‹ì•„ìš” ìˆ˜ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
FOREIGN KEY (live_id) REFERENCES live_broadcasts(live_id) ON DELETE CASCADE
CHECK (rating >= 1 AND rating <= 5)
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_live_comments_live ON live_comments(live_id);
CREATE INDEX idx_live_comments_rating ON live_comments(live_id, rating);
```

---

### 3.9 live_faqs (FAQ ì •ë³´)

**ì„¤ëª…**: ë¼ì´ë¸Œ ë°©ì†¡ì˜ FAQ ì •ë³´

**Primary Key**: `faq_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| faq_id | VARCHAR(255) | NO | - | FAQ ID (PK) |
| live_id | VARCHAR(255) | NO | - | ë¼ì´ë¸Œ ID (FK) |
| category | VARCHAR(100) | YES | - | ì¹´í…Œê³ ë¦¬ |
| question | TEXT | NO | - | ì§ˆë¬¸ |
| answer | TEXT | NO | - | ë‹µë³€ |
| view_count | INTEGER | YES | 0 | ì¡°íšŒìˆ˜ |
| helpful_count | INTEGER | YES | 0 | ë„ì›€ë¨ ìˆ˜ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
FOREIGN KEY (live_id) REFERENCES live_broadcasts(live_id) ON DELETE CASCADE
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_live_faqs_live ON live_faqs(live_id);
CREATE INDEX idx_live_faqs_category ON live_faqs(live_id, category);
```

---

### 3.10 live_intro (ë¼ì´ë¸Œ ì†Œê°œ)

**ì„¤ëª…**: ë¼ì´ë¸Œ ë°©ì†¡ì˜ ì†Œê°œ ì •ë³´

**Primary Key**: `live_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| live_id | VARCHAR(255) | NO | - | ë¼ì´ë¸Œ ID (PK, FK) |
| intro_title | VARCHAR(500) | YES | - | ì†Œê°œ ì œëª© |
| intro_content | TEXT | YES | - | ì†Œê°œ ë‚´ìš© |
| host_name | VARCHAR(100) | YES | - | ì§„í–‰ìžëª… |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
FOREIGN KEY (live_id) REFERENCES live_broadcasts(live_id) ON DELETE CASCADE
```

---

### 3.11 live_statistics (í†µê³„ ì •ë³´)

**ì„¤ëª…**: ë¼ì´ë¸Œ ë°©ì†¡ì˜ í†µê³„ ì •ë³´

**Primary Key**: `stat_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| stat_id | SERIAL | NO | AUTO | í†µê³„ ID (PK) |
| live_id | VARCHAR(255) | NO | - | ë¼ì´ë¸Œ ID (FK) |
| view_count | INTEGER | YES | 0 | ì¡°íšŒìˆ˜ |
| like_count | INTEGER | YES | 0 | ì¢‹ì•„ìš” ìˆ˜ |
| share_count | INTEGER | YES | 0 | ê³µìœ  ìˆ˜ |
| purchase_count | INTEGER | YES | 0 | êµ¬ë§¤ ìˆ˜ |
| viewer_peak | INTEGER | YES | 0 | ìµœëŒ€ ì‹œì²­ìž ìˆ˜ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
FOREIGN KEY (live_id) REFERENCES live_broadcasts(live_id) ON DELETE CASCADE
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_live_statistics_live ON live_statistics(live_id);
```

---

### 3.12 live_images (ì´ë¯¸ì§€ ì •ë³´)

**ì„¤ëª…**: ë¼ì´ë¸Œ ë°©ì†¡ì˜ ì´ë¯¸ì§€ ì •ë³´

**Primary Key**: `image_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| image_id | SERIAL | NO | AUTO | ì´ë¯¸ì§€ ID (PK) |
| live_id | VARCHAR(255) | NO | - | ë¼ì´ë¸Œ ID (FK) |
| image_url | TEXT | NO | - | ì´ë¯¸ì§€ URL |
| image_type | VARCHAR(50) | YES | - | ì´ë¯¸ì§€ íƒ€ìž… |
| display_order | INTEGER | YES | 0 | í‘œì‹œ ìˆœì„œ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
FOREIGN KEY (live_id) REFERENCES live_broadcasts(live_id) ON DELETE CASCADE
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_live_images_live ON live_images(live_id);
CREATE INDEX idx_live_images_order ON live_images(live_id, display_order);
```

---

### 3.13 cs_response_scripts (CS ì‘ë‹µ ìŠ¤í¬ë¦½íŠ¸)

**ì„¤ëª…**: CS ìƒë‹´ì›ì„ ìœ„í•œ ì‘ë‹µ ìŠ¤í¬ë¦½íŠ¸

**Primary Key**: `script_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| script_id | UUID | NO | uuid_generate_v4() | ìŠ¤í¬ë¦½íŠ¸ ID (PK) |
| live_id | VARCHAR(255) | YES | - | ë¼ì´ë¸Œ ID (FK, optional) |
| scenario | VARCHAR(200) | NO | - | ì‹œë‚˜ë¦¬ì˜¤ |
| script | TEXT | NO | - | ìŠ¤í¬ë¦½íŠ¸ ë‚´ìš© |
| tone | VARCHAR(50) | YES | 'FORMAL' | ë§íˆ¬ |
| category | VARCHAR(100) | YES | - | ì¹´í…Œê³ ë¦¬ |
| priority | INTEGER | YES | 0 | ìš°ì„ ìˆœìœ„ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |
| updated_at | TIMESTAMPTZ | YES | NOW() | ìˆ˜ì • ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
CHECK (tone IN ('FORMAL', 'CASUAL', 'FRIENDLY'))
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_cs_scripts_live ON cs_response_scripts(live_id);
CREATE INDEX idx_cs_scripts_category ON cs_response_scripts(category);
```

---

### 3.14 expected_customer_questions (ì˜ˆìƒ ê³ ê° ì§ˆë¬¸)

**ì„¤ëª…**: ì˜ˆìƒë˜ëŠ” ê³ ê° ì§ˆë¬¸ ë° ë‹µë³€

**Primary Key**: `question_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| question_id | UUID | NO | uuid_generate_v4() | ì§ˆë¬¸ ID (PK) |
| live_id | VARCHAR(255) | YES | - | ë¼ì´ë¸Œ ID (FK, optional) |
| script_id | UUID | YES | - | ìŠ¤í¬ë¦½íŠ¸ ID (FK, optional) |
| question | TEXT | NO | - | ì§ˆë¬¸ |
| answer | TEXT | NO | - | ë‹µë³€ |
| category | VARCHAR(100) | YES | - | ì¹´í…Œê³ ë¦¬ |
| priority | INTEGER | YES | 0 | ìš°ì„ ìˆœìœ„ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |
| updated_at | TIMESTAMPTZ | YES | NOW() | ìˆ˜ì • ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
FOREIGN KEY (script_id) REFERENCES cs_response_scripts(script_id) ON DELETE SET NULL
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_expected_questions_live ON expected_customer_questions(live_id);
CREATE INDEX idx_expected_questions_script ON expected_customer_questions(script_id);
CREATE INDEX idx_expected_questions_category ON expected_customer_questions(category);
```

---

### 3.15 risk_points (ë¦¬ìŠ¤í¬ í¬ì¸íŠ¸)

**ì„¤ëª…**: ìƒë‹´ ì‹œ ì£¼ì˜í•´ì•¼ í•  ë¦¬ìŠ¤í¬ í¬ì¸íŠ¸

**Primary Key**: `risk_id`

| ì»¬ëŸ¼ëª… | ë°ì´í„° íƒ€ìž… | Null | ê¸°ë³¸ê°’ | ì„¤ëª… |
|--------|------------|------|--------|------|
| risk_id | UUID | NO | uuid_generate_v4() | ë¦¬ìŠ¤í¬ ID (PK) |
| live_id | VARCHAR(255) | YES | - | ë¼ì´ë¸Œ ID (FK, optional) |
| risk_type | VARCHAR(50) | NO | - | ë¦¬ìŠ¤í¬ íƒ€ìž… |
| description | TEXT | NO | - | ì„¤ëª… |
| severity | VARCHAR(20) | YES | 'MEDIUM' | ì‹¬ê°ë„ |
| recommended_action | TEXT | YES | - | ê¶Œìž¥ ì¡°ì¹˜ |
| created_at | TIMESTAMPTZ | YES | NOW() | ìƒì„± ì¼ì‹œ |
| updated_at | TIMESTAMPTZ | YES | NOW() | ìˆ˜ì • ì¼ì‹œ |

**ì œì•½ ì¡°ê±´**:
```sql
CHECK (risk_type IN ('USAGE', 'POLICY', 'PRODUCT', 'DELIVERY', 'REFUND'))
CHECK (severity IN ('LOW', 'MEDIUM', 'HIGH', 'CRITICAL'))
```

**ì¸ë±ìŠ¤**:
```sql
CREATE INDEX idx_risk_points_live ON risk_points(live_id);
CREATE INDEX idx_risk_points_type ON risk_points(risk_type);
CREATE INDEX idx_risk_points_severity ON risk_points(severity);
```

---

## 4. ì¸ë±ìŠ¤ ì„¤ê³„

### 4.1 ì¸ë±ìŠ¤ ëª©ë¡

| í…Œì´ë¸” | ì¸ë±ìŠ¤ëª… | ì»¬ëŸ¼ | íƒ€ìž… | ëª©ì  |
|--------|---------|------|------|------|
| channels | idx_channels_code | channel_code | B-tree | ì±„ë„ ì½”ë“œ ê²€ìƒ‰ |
| channels | idx_channels_type | channel_type | B-tree | ì±„ë„ íƒ€ìž… í•„í„°ë§ |
| platforms | idx_platforms_code | platform_code | B-tree | í”Œëž«í¼ ì½”ë“œ ê²€ìƒ‰ |
| platforms | idx_platforms_active | is_active | B-tree | í™œì„± í”Œëž«í¼ í•„í„°ë§ |
| brands | idx_brands_code | brand_code | B-tree | ë¸Œëžœë“œ ì½”ë“œ ê²€ìƒ‰ |
| brands | idx_brands_active | is_active | B-tree | í™œì„± ë¸Œëžœë“œ í•„í„°ë§ |
| live_broadcasts | idx_live_broadcasts_channel | channel_id | B-tree | ì±„ë„ë³„ ë¼ì´ë¸Œ ì¡°íšŒ |
| live_broadcasts | idx_live_broadcasts_status | status | B-tree | ìƒíƒœë³„ ë¼ì´ë¸Œ ì¡°íšŒ |
| live_broadcasts | idx_live_broadcasts_date | broadcast_date | B-tree | ë‚ ì§œë³„ ë¼ì´ë¸Œ ì¡°íšŒ |
| live_broadcasts | idx_live_broadcasts_brand | brand_name | B-tree | ë¸Œëžœë“œë³„ ë¼ì´ë¸Œ ì¡°íšŒ |
| live_broadcasts | idx_live_broadcasts_platform | platform_name | B-tree | í”Œëž«í¼ë³„ ë¼ì´ë¸Œ ì¡°íšŒ |
| live_products | idx_live_products_live | live_id | B-tree | ë¼ì´ë¸Œë³„ ìƒí’ˆ ì¡°íšŒ |
| live_products | idx_live_products_order | live_id, product_order | B-tree | ìƒí’ˆ ìˆœì„œ ì •ë ¬ |
| live_coupons | idx_live_coupons_live | live_id | B-tree | ë¼ì´ë¸Œë³„ ì¿ í° ì¡°íšŒ |
| live_coupons | idx_live_coupons_valid | valid_from, valid_until | B-tree | ìœ íš¨ ê¸°ê°„ ê²€ìƒ‰ |
| live_benefits | idx_live_benefits_live | live_id | B-tree | ë¼ì´ë¸Œë³„ í˜œíƒ ì¡°íšŒ |
| live_benefits | idx_live_benefits_type | live_id, benefit_type | B-tree | í˜œíƒ íƒ€ìž… í•„í„°ë§ |
| live_comments | idx_live_comments_live | live_id | B-tree | ë¼ì´ë¸Œë³„ ëŒ“ê¸€ ì¡°íšŒ |
| live_comments | idx_live_comments_rating | live_id, rating | B-tree | í‰ì ë³„ ëŒ“ê¸€ ì¡°íšŒ |
| live_faqs | idx_live_faqs_live | live_id | B-tree | ë¼ì´ë¸Œë³„ FAQ ì¡°íšŒ |
| live_faqs | idx_live_faqs_category | live_id, category | B-tree | ì¹´í…Œê³ ë¦¬ë³„ FAQ ì¡°íšŒ |
| live_statistics | idx_live_statistics_live | live_id | B-tree | ë¼ì´ë¸Œë³„ í†µê³„ ì¡°íšŒ |
| live_images | idx_live_images_live | live_id | B-tree | ë¼ì´ë¸Œë³„ ì´ë¯¸ì§€ ì¡°íšŒ |
| live_images | idx_live_images_order | live_id, display_order | B-tree | ì´ë¯¸ì§€ ìˆœì„œ ì •ë ¬ |

### 4.2 ì¸ë±ìŠ¤ ì„±ëŠ¥ ìµœì í™”

#### ë³µí•© ì¸ë±ìŠ¤ (Composite Index)
```sql
-- ë‚ ì§œ + ìƒíƒœ ë³µí•© ê²€ìƒ‰
CREATE INDEX idx_live_broadcasts_date_status 
ON live_broadcasts(broadcast_date, status);

-- ë¸Œëžœë“œ + ë‚ ì§œ ë³µí•© ê²€ìƒ‰
CREATE INDEX idx_live_broadcasts_brand_date 
ON live_broadcasts(brand_name, broadcast_date);
```

#### ì „ë¬¸ ê²€ìƒ‰ ì¸ë±ìŠ¤ (Full-Text Search)
```sql
-- ë¼ì´ë¸Œ ì œëª© ì „ë¬¸ ê²€ìƒ‰
CREATE INDEX idx_live_broadcasts_title_trgm 
ON live_broadcasts USING gin (live_title_customer gin_trgm_ops);

-- ìƒí’ˆëª… ì „ë¬¸ ê²€ìƒ‰
CREATE INDEX idx_live_products_name_trgm 
ON live_products USING gin (product_name gin_trgm_ops);
```

---

## 5. ì œì•½ ì¡°ê±´

### 5.1 Primary Key ì œì•½

ëª¨ë“  í…Œì´ë¸”ì€ Primary Keyë¥¼ ê°€ì§:
- `SERIAL` ë˜ëŠ” `UUID` íƒ€ìž… ì‚¬ìš©
- ìžë™ ì¦ê°€ ë˜ëŠ” UUID ìƒì„±

### 5.2 Foreign Key ì œì•½

**CASCADE ì •ì±…**:
```sql
-- ë¼ì´ë¸Œ ì‚­ì œ ì‹œ ê´€ë ¨ ë°ì´í„° ëª¨ë‘ ì‚­ì œ
FOREIGN KEY (live_id) REFERENCES live_broadcasts(live_id) ON DELETE CASCADE
```

**SET NULL ì •ì±…**:
```sql
-- ìŠ¤í¬ë¦½íŠ¸ ì‚­ì œ ì‹œ ì§ˆë¬¸ì˜ script_idë¥¼ NULLë¡œ ì„¤ì •
FOREIGN KEY (script_id) REFERENCES cs_response_scripts(script_id) ON DELETE SET NULL
```

### 5.3 Unique ì œì•½

```sql
-- ì±„ë„ ì½”ë“œ ì¤‘ë³µ ë°©ì§€
UNIQUE (channel_code)

-- í”Œëž«í¼ ì½”ë“œ ì¤‘ë³µ ë°©ì§€
UNIQUE (platform_code)

-- ë¸Œëžœë“œ ì½”ë“œ ì¤‘ë³µ ë°©ì§€
UNIQUE (brand_code)
```

### 5.4 Check ì œì•½

```sql
-- ì±„ë„ íƒ€ìž… ì œí•œ
CHECK (channel_type IN ('DIRECT', 'PARTNER', 'LIVE'))

-- ë¼ì´ë¸Œ ìƒíƒœ ì œí•œ
CHECK (status IN ('PENDING', 'ACTIVE', 'ENDED', 'CANCELLED'))

-- í˜œíƒ íƒ€ìž… ì œí•œ
CHECK (benefit_type IN ('í• ì¸', 'ì‚¬ì€í’ˆ', 'ì¿ í°', 'í¬ì¸íŠ¸', 'ë°°ì†¡'))

-- í‰ì  ë²”ìœ„ ì œí•œ
CHECK (rating >= 1 AND rating <= 5)

-- ë¦¬ìŠ¤í¬ ì‹¬ê°ë„ ì œí•œ
CHECK (severity IN ('LOW', 'MEDIUM', 'HIGH', 'CRITICAL'))
```

### 5.5 Not Null ì œì•½

í•„ìˆ˜ í•„ë“œì— NOT NULL ì œì•½ ì ìš©:
- Primary Key
- Foreign Key
- í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ í•„ë“œ (ì œëª©, ì´ë¦„ ë“±)

---

## 6. ë°ì´í„° íƒ€ìž… ë° ê·œì¹™

### 6.1 ë°ì´í„° íƒ€ìž… ì„ íƒ ê¸°ì¤€

| ë°ì´í„° ì¢…ë¥˜ | ë°ì´í„° íƒ€ìž… | ì˜ˆì‹œ |
|------------|------------|------|
| ê³ ìœ  ID | UUID | `uuid_generate_v4()` |
| ìžë™ ì¦ê°€ ID | SERIAL | `1, 2, 3, ...` |
| ì§§ì€ í…ìŠ¤íŠ¸ | VARCHAR(n) | ì´ë¦„, ì½”ë“œ |
| ê¸´ í…ìŠ¤íŠ¸ | TEXT | ì„¤ëª…, ë‚´ìš© |
| ë‚ ì§œ | DATE | `2025-12-08` |
| ì‹œê°„ | TIME | `14:00:00` |
| ë‚ ì§œ+ì‹œê°„ | TIMESTAMPTZ | `2025-12-08T14:00:00Z` |
| ì •ìˆ˜ | INTEGER | ì¡°íšŒìˆ˜, ì¢‹ì•„ìš” ìˆ˜ |
| ë¶ˆë¦° | BOOLEAN | TRUE/FALSE |

### 6.2 ëª…ëª… ê·œì¹™

#### í…Œì´ë¸”ëª…
- ì†Œë¬¸ìž, ì–¸ë”ìŠ¤ì½”ì–´ ì‚¬ìš©
- ë³µìˆ˜í˜• ì‚¬ìš© (channels, products)
- ì ‘ë‘ì‚¬: `live_` (ë¼ì´ë¸Œ ê´€ë ¨ í…Œì´ë¸”)

#### ì»¬ëŸ¼ëª…
- ì†Œë¬¸ìž, ì–¸ë”ìŠ¤ì½”ì–´ ì‚¬ìš©
- ëª…í™•í•œ ì˜ë¯¸ ì „ë‹¬
- ì ‘ë¯¸ì‚¬:
  - `_id`: ID í•„ë“œ
  - `_at`: ë‚ ì§œ/ì‹œê°„ í•„ë“œ
  - `_url`: URL í•„ë“œ
  - `_count`: ì¹´ìš´íŠ¸ í•„ë“œ

#### ì¸ë±ìŠ¤ëª…
- ì ‘ë‘ì‚¬: `idx_`
- í˜•ì‹: `idx_{í…Œì´ë¸”ëª…}_{ì»¬ëŸ¼ëª…}`
- ì˜ˆì‹œ: `idx_live_broadcasts_status`

### 6.3 ê¸°ë³¸ê°’ ê·œì¹™

```sql
-- ë‚ ì§œ/ì‹œê°„ í•„ë“œ
created_at TIMESTAMPTZ DEFAULT NOW()
updated_at TIMESTAMPTZ DEFAULT NOW()

-- ë¶ˆë¦° í•„ë“œ
is_active BOOLEAN DEFAULT TRUE

-- ì¹´ìš´íŠ¸ í•„ë“œ
view_count INTEGER DEFAULT 0
like_count INTEGER DEFAULT 0

-- ìƒíƒœ í•„ë“œ
status VARCHAR(20) DEFAULT 'PENDING'
```

---

## 7. ë°±ì—… ë° ë³µêµ¬

### 7.1 ë°±ì—… ì •ì±…

#### Supabase ìžë™ ë°±ì—…
- **ì£¼ê¸°**: ì¼ì¼ (ë§¤ì¼ ìžì • UTC)
- **ë³´ê´€ ê¸°ê°„**: 7ì¼
- **ë°±ì—… íƒ€ìž…**: Full Backup

#### ìˆ˜ë™ ë°±ì—…
```bash
# PostgreSQL ë¤í”„
pg_dump -h uewhvekfjjvxoioklzza.supabase.co \
        -U postgres \
        -d postgres \
        -f backup_$(date +%Y%m%d).sql

# íŠ¹ì • í…Œì´ë¸”ë§Œ ë°±ì—…
pg_dump -h uewhvekfjjvxoioklzza.supabase.co \
        -U postgres \
        -d postgres \
        -t live_broadcasts \
        -f backup_live_broadcasts_$(date +%Y%m%d).sql
```

### 7.2 ë³µêµ¬ ì ˆì°¨

#### ì „ì²´ ë³µêµ¬
```bash
# SQL íŒŒì¼ë¡œ ë³µêµ¬
psql -h uewhvekfjjvxoioklzza.supabase.co \
     -U postgres \
     -d postgres \
     -f backup_20251208.sql
```

#### íŠ¹ì • í…Œì´ë¸” ë³µêµ¬
```bash
# í…Œì´ë¸” ì‚­ì œ í›„ ë³µêµ¬
psql -h uewhvekfjjvxoioklzza.supabase.co \
     -U postgres \
     -d postgres \
     -c "DROP TABLE IF EXISTS live_broadcasts CASCADE;"

psql -h uewhvekfjjvxoioklzza.supabase.co \
     -U postgres \
     -d postgres \
     -f backup_live_broadcasts_20251208.sql
```

### 7.3 ë°ì´í„° ë§ˆì´ê·¸ë ˆì´ì…˜

#### ìŠ¤í‚¤ë§ˆ ë³€ê²½ (Migration)
```sql
-- 1. ìƒˆ ì»¬ëŸ¼ ì¶”ê°€
ALTER TABLE live_broadcasts 
ADD COLUMN new_column VARCHAR(100);

-- 2. ê¸°ë³¸ê°’ ì„¤ì •
ALTER TABLE live_broadcasts 
ALTER COLUMN new_column SET DEFAULT 'default_value';

-- 3. NOT NULL ì œì•½ ì¶”ê°€
ALTER TABLE live_broadcasts 
ALTER COLUMN new_column SET NOT NULL;

-- 4. ì¸ë±ìŠ¤ ìƒì„±
CREATE INDEX idx_live_broadcasts_new 
ON live_broadcasts(new_column);
```

---

## ë¶€ë¡ A: SQL ìŠ¤í¬ë¦½íŠ¸

### A.1 ì „ì²´ ìŠ¤í‚¤ë§ˆ ìƒì„± ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼ ìœ„ì¹˜**: `/database/supabase_schema.sql`

### A.2 ìƒ˜í”Œ ë°ì´í„° ì‚½ìž… ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼ ìœ„ì¹˜**: `/database/sample_data.sql`

### A.3 ì¸ë±ìŠ¤ ìƒì„± ìŠ¤í¬ë¦½íŠ¸

**íŒŒì¼ ìœ„ì¹˜**: `/database/create_indexes.sql`

---

## ë¶€ë¡ B: ë°ì´í„° ì‚¬ì „

### B.1 ì½”ë“œ ê°’ ì •ì˜

#### channel_type (ì±„ë„ íƒ€ìž…)
- `DIRECT`: ì§ì˜ëª°
- `PARTNER`: ìž…ì ëª°
- `LIVE`: ë¼ì´ë¸Œ ì‡¼í•‘

#### status (ë¼ì´ë¸Œ ìƒíƒœ)
- `PENDING`: ì˜ˆì •
- `ACTIVE`: ì§„í–‰ ì¤‘
- `ENDED`: ì¢…ë£Œ
- `CANCELLED`: ì·¨ì†Œ

#### benefit_type (í˜œíƒ íƒ€ìž…)
- `í• ì¸`: í• ì¸ í˜œíƒ
- `ì‚¬ì€í’ˆ`: ì‚¬ì€í’ˆ ì¦ì •
- `ì¿ í°`: ì¿ í° ì œê³µ
- `í¬ì¸íŠ¸`: í¬ì¸íŠ¸ ì ë¦½
- `ë°°ì†¡`: ë°°ì†¡ í˜œíƒ

#### discount_type (í• ì¸ íƒ€ìž…)
- `AMOUNT`: ê¸ˆì•¡ í• ì¸
- `RATE`: ë¹„ìœ¨ í• ì¸

#### tone (ë§íˆ¬)
- `FORMAL`: ê²©ì‹ì²´
- `CASUAL`: ë°˜ë§
- `FRIENDLY`: ì¹œê·¼í•œ ë§íˆ¬

#### severity (ì‹¬ê°ë„)
- `LOW`: ë‚®ìŒ
- `MEDIUM`: ì¤‘ê°„
- `HIGH`: ë†’ìŒ
- `CRITICAL`: ë§¤ìš° ë†’ìŒ

---

**ë¬¸ì„œ ì´ë ¥**

| ë²„ì „ | ë‚ ì§œ | ìž‘ì„±ìž | ë³€ê²½ ë‚´ì—­ |
|------|------|--------|----------|
| 1.0 | 2025-12-08 | AI Assistant | ìµœì´ˆ ìž‘ì„± |

---

**Â© 2025 Amore Pacific. All Rights Reserved.**

