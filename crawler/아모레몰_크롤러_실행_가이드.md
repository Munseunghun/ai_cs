# ì•„ëª¨ë ˆëª° ë¼ì´ë¸Œ ì‡¼í•‘ í¬ë¡¤ëŸ¬ ì‹¤í–‰ ê°€ì´ë“œ

**ì‘ì„±ì¼**: 2025-12-11
**í¬ë¡¤ëŸ¬ íŒŒì¼**: `amoremall_live_crawler.py`

---

## ğŸ“‹ ê°œìš”

ì•„ëª¨ë ˆëª° ë¼ì´ë¸Œ ì‡¼í•‘ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” Python ê¸°ë°˜ í¬ë¡¤ëŸ¬ì…ë‹ˆë‹¤.

### ìˆ˜ì§‘ í•­ëª©
1. âœ… **ë°©ì†¡ ê¸°ë³¸ ì •ë³´** - ì œëª©, ë¸Œëœë“œ, ì¸ë„¤ì¼, ìƒíƒœ
2. âœ… **ìƒí’ˆ ì •ë³´** - ìƒí’ˆëª…, ë¸Œëœë“œëª…, ê°€ê²©, í• ì¸ìœ¨, ì¸ë„¤ì¼
3. âœ… **ë°©ì†¡ í˜œíƒ** - ì¿ í°, í• ì¸, ì‚¬ì€í’ˆ
4. âœ… **FAQ** - ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ë° ë‹µë³€
5. âœ… **ëŒ“ê¸€** - ì‚¬ìš©ì ëŒ“ê¸€ ë° í‰ì 

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### 1. ê¸°ë³¸ ì‹¤í–‰

```bash
cd "/Users/amore/ai_cs ì‹œìŠ¤í…œ/crawler"
python3 amoremall_live_crawler.py
```

### 2. íŠ¹ì • URL í¬ë¡¤ë§

```python
from amoremall_live_crawler import AmoremallLiveCrawler

crawler = AmoremallLiveCrawler()
url = "https://www.amoremall.com/kr/ko/display/live/playerweb?sy_id=678f729865cf422cde50d959&sy_type=broadcast"
crawler.run(url)
crawler.print_stats()
```

---

## ğŸ“Š ì‹¤í–‰ ê²°ê³¼

### ì„±ê³µ ì¼€ì´ìŠ¤

```
================================================================================
ğŸš€ ì•„ëª¨ë ˆëª° ë¼ì´ë¸Œ í¬ë¡¤ëŸ¬ ì‹œì‘
================================================================================
âœ… Supabase í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™” ì™„ë£Œ
âœ… ChromeDriver ì´ˆê¸°í™” ì™„ë£Œ
ğŸ¬ ì•„ëª¨ë ˆëª° ë¼ì´ë¸Œ í¬ë¡¤ë§ ì‹œì‘
   URL: https://www.amoremall.com/kr/ko/display/live/playerweb?...
   Live ID: REAL_AMOREMALL_678f729865cf422cde50d959
   âœ… ê¸°ë³¸ ì •ë³´ ìˆ˜ì§‘: [ë·°í‹°ë ˆì‹œí”¼] ì•„ì´ì˜¤í˜ x ë©”ì´í¬ì˜¨
   ğŸ“¦ ìƒí’ˆ ìš”ì†Œ ë°œê²¬: 8ê°œ
   âœ… ìƒí’ˆ ìˆ˜ì§‘: 5ê°œ
   âœ… í˜œíƒ ìˆ˜ì§‘: 2ê°œ
   âœ… FAQ ìˆ˜ì§‘: 3ê°œ
   âœ… ëŒ“ê¸€ ìˆ˜ì§‘: 10ê°œ
âœ… ë°ì´í„° ìˆ˜ì§‘ ì™„ë£Œ
ğŸ’¾ Supabaseì— ë°ì´í„° ì €ì¥ ì¤‘...
   âœ… ë¼ì´ë¸Œ ë°©ì†¡ ì •ë³´ ì €ì¥
   âœ… ìƒí’ˆ 5ê°œ ì €ì¥
   âœ… í˜œíƒ 2ê°œ ì €ì¥
   âœ… FAQ 3ê°œ ì €ì¥
   âœ… ëŒ“ê¸€ 10ê°œ ì €ì¥
âœ… Supabase ì €ì¥ ì™„ë£Œ
================================================================================
ğŸ“Š í¬ë¡¤ë§ í†µê³„
================================================================================
ì²˜ë¦¬ ì™„ë£Œ: 1ê°œ
ìƒí’ˆ ìˆ˜ì§‘: 5ê°œ
í˜œíƒ ìˆ˜ì§‘: 2ê°œ
FAQ ìˆ˜ì§‘: 3ê°œ
ëŒ“ê¸€ ìˆ˜ì§‘: 10ê°œ
ì—ëŸ¬: 0ê°œ
================================================================================
âœ… í¬ë¡¤ë§ ì„±ê³µ
```

---

## ğŸ”§ í¬ë¡¤ëŸ¬ êµ¬ì¡°

### í´ë˜ìŠ¤: AmoremallLiveCrawler

#### ì£¼ìš” ë©”ì„œë“œ

| ë©”ì„œë“œ | ì„¤ëª… |
|--------|------|
| `__init__()` | í¬ë¡¤ëŸ¬ ì´ˆê¸°í™” ë° Supabase ì—°ê²° |
| `init_driver()` | Selenium WebDriver ì´ˆê¸°í™” |
| `extract_live_id()` | URLì—ì„œ ë¼ì´ë¸Œ ID ì¶”ì¶œ |
| `crawl_live_data()` | ë¼ì´ë¸Œ ë°ì´í„° ìˆ˜ì§‘ (ë©”ì¸) |
| `_collect_basic_info()` | ê¸°ë³¸ ì •ë³´ ìˆ˜ì§‘ |
| `_collect_products()` | ìƒí’ˆ ì •ë³´ ìˆ˜ì§‘ |
| `_collect_benefits()` | í˜œíƒ ì •ë³´ ìˆ˜ì§‘ |
| `_collect_faqs()` | FAQ ìˆ˜ì§‘ |
| `_collect_comments()` | ëŒ“ê¸€ ìˆ˜ì§‘ |
| `save_to_supabase()` | Supabaseì— ì €ì¥ |
| `run()` | í¬ë¡¤ëŸ¬ ì‹¤í–‰ (ì „ì²´ í”„ë¡œì„¸ìŠ¤) |
| `print_stats()` | í†µê³„ ì¶œë ¥ |

---

## ğŸ“ ë°ì´í„° êµ¬ì¡°

### 1. ë¼ì´ë¸Œ ë°©ì†¡ ê¸°ë³¸ ì •ë³´

```python
{
    'live_id': 'REAL_AMOREMALL_678f729865cf422cde50d959',
    'channel_code': 'AMOREMALL',
    'platform_name': 'ì•„ëª¨ë ˆëª°',
    'brand_name': 'ì•„ì´ì˜¤í˜',
    'live_title_customer': '[ë·°í‹°ë ˆì‹œí”¼] ì•„ì´ì˜¤í˜ x ë©”ì´í¬ì˜¨',
    'source_url': 'https://www.amoremall.com/...',
    'thumbnail_url': 'https://...',
    'broadcast_date': '2025-12-11',
    'status': 'ACTIVE',
    'collected_at': '2025-12-11T14:03:59'
}
```

### 2. ìƒí’ˆ ì •ë³´

```python
{
    'live_id': 'REAL_AMOREMALL_678f729865cf422cde50d959',
    'product_order': 1,
    'product_name': 'ì•„ì´ì˜¤í˜ ë ˆí‹°ë†€ ì—ì„¼ìŠ¤',
    'brand_name': 'ì•„ì´ì˜¤í˜',
    'original_price': '50000',
    'sale_price': '35000',
    'discount_rate': '30%',
    'product_url': 'https://...',
    'image_url': 'https://...'
}
```

### 3. í˜œíƒ ì •ë³´

```python
{
    'live_id': 'REAL_AMOREMALL_678f729865cf422cde50d959',
    'benefit_type': 'ì¿ í°',
    'benefit_name': 'ì‹ ê·œíšŒì› 5,000ì› ì¿ í°',
    'benefit_detail': '3ë§Œì› ì´ìƒ êµ¬ë§¤ ì‹œ ì‚¬ìš© ê°€ëŠ¥',
    'benefit_condition': 'ì‹ ê·œíšŒì› ëŒ€ìƒ'
}
```

### 4. FAQ

```python
{
    'live_id': 'REAL_AMOREMALL_678f729865cf422cde50d959',
    'faq_id': 'REAL_AMOREMALL_678f729865cf422cde50d959_FAQ_1',
    'question': 'ë°°ì†¡ì€ ì–¸ì œ ë˜ë‚˜ìš”?',
    'answer': 'ì£¼ë¬¸ í›„ 2-3ì¼ ì´ë‚´ ë°°ì†¡ë©ë‹ˆë‹¤.',
    'category': 'ë°°ì†¡'
}
```

### 5. ëŒ“ê¸€

```python
{
    'live_id': 'REAL_AMOREMALL_678f729865cf422cde50d959',
    'author': 'user***',
    'content': 'ì œí’ˆ ì •ë§ ì¢‹ì•„ìš”!',
    'rating': 5,
    'created_at': '2025-12-11 14:00'
}
```

---

## âš™ï¸ ì„¤ì •

### í™˜ê²½ ë³€ìˆ˜ (.env)

```env
SUPABASE_URL=https://uewhvekfjjvxoioklzza.supabase.co
SUPABASE_ANON_KEY=***
```

### í¬ë¡¤ëŸ¬ ì„¤ì •

```python
# ìµœëŒ€ ìˆ˜ì§‘ ê°œìˆ˜
MAX_PRODUCTS = 50    # ìƒí’ˆ ìµœëŒ€ 50ê°œ
MAX_COMMENTS = 100   # ëŒ“ê¸€ ìµœëŒ€ 100ê°œ

# ëŒ€ê¸° ì‹œê°„
PAGE_LOAD_WAIT = 5   # í˜ì´ì§€ ë¡œë”© ëŒ€ê¸° (ì´ˆ)
ELEMENT_WAIT = 1     # ìš”ì†Œ ë¡œë”© ëŒ€ê¸° (ì´ˆ)
```

---

## ğŸ” CSS ì„ íƒì

### ìƒí’ˆ ì„ íƒì

```python
PRODUCT_SELECTORS = [
    '.product-item',
    '.product-list .product',
    '[class*="product"]',
    '.goods-item',
    '.item'
]
```

### í˜œíƒ ì„ íƒì

```python
BENEFIT_SELECTORS = [
    '.coupon-item',
    '.benefit-item',
    '[class*="coupon"]',
    '[class*="benefit"]'
]
```

### FAQ ì„ íƒì

```python
FAQ_SELECTORS = [
    '.faq-item',
    '.qa-item',
    '[class*="faq"]',
    '.accordion-item'
]
```

### ëŒ“ê¸€ ì„ íƒì

```python
COMMENT_SELECTORS = [
    '.comment-item',
    '.reply-item',
    '[class*="comment"]',
    '.review-item'
]
```

---

## ğŸ› íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ë¬¸ì œ 1: ë°ì´í„°ê°€ ìˆ˜ì§‘ë˜ì§€ ì•ŠìŒ

**ì›ì¸**: í˜ì´ì§€ê°€ ë™ì ìœ¼ë¡œ ë¡œë“œë˜ê±°ë‚˜ ì„ íƒìê°€ ë§ì§€ ì•ŠìŒ

**í•´ê²° ë°©ë²•**:
1. í˜ì´ì§€ ë¡œë”© ëŒ€ê¸° ì‹œê°„ ì¦ê°€
   ```python
   time.sleep(10)  # 5ì´ˆ â†’ 10ì´ˆ
   ```

2. í˜ì´ì§€ êµ¬ì¡° í™•ì¸
   ```python
   # í˜ì´ì§€ ì†ŒìŠ¤ ì €ì¥
   with open('page_source.html', 'w', encoding='utf-8') as f:
       f.write(self.driver.page_source)
   ```

3. ìŠ¤í¬ë¦°ìƒ· í™•ì¸
   ```python
   self.driver.save_screenshot('screenshot.png')
   ```

---

### ë¬¸ì œ 2: ChromeDriver ì˜¤ë¥˜

**ì›ì¸**: ChromeDriver ë²„ì „ ë¶ˆì¼ì¹˜

**í•´ê²° ë°©ë²•**:
```bash
# ChromeDriver ì¬ì„¤ì¹˜
pip install --upgrade webdriver-manager
```

---

### ë¬¸ì œ 3: Supabase ì €ì¥ ì‹¤íŒ¨

**ì›ì¸**: í™˜ê²½ ë³€ìˆ˜ ëˆ„ë½ ë˜ëŠ” ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜

**í•´ê²° ë°©ë²•**:
```bash
# í™˜ê²½ ë³€ìˆ˜ í™•ì¸
cat .env

# Supabase ì—°ê²° í…ŒìŠ¤íŠ¸
python3 -c "from supabase import create_client; import os; from dotenv import load_dotenv; load_dotenv(); print(create_client(os.getenv('SUPABASE_URL'), os.getenv('SUPABASE_ANON_KEY')))"
```

---

## ğŸ“… ìŠ¤ì¼€ì¤„ëŸ¬ í†µí•©

### dynamic_scheduler.pyì— ì¶”ê°€

```python
# í”Œë«í¼ í¬ë¡¤ëŸ¬ ë§¤í•‘
self.p_platform_crawlers = {
    'NAVER': 'crawl_multi_brands.py',
    'KAKAO': 'kakao_live_crawler.py',
    'AMOREMALL': 'amoremall_live_crawler.py',  # ì¶”ê°€
    # ...
}
```

### í”Œë«í¼ ì„¤ì • (config/platforms.json)

```json
{
  "code": "AMOREMALL",
  "name": "ì•„ëª¨ë ˆëª°",
  "url": "https://www.amoremall.com",
  "isActive": true
}
```

---

## ğŸ“Š ì„±ëŠ¥

### ì˜ˆìƒ ìˆ˜ì§‘ ì‹œê°„

| í•­ëª© | ì‹œê°„ |
|------|------|
| í˜ì´ì§€ ë¡œë”© | 5ì´ˆ |
| ê¸°ë³¸ ì •ë³´ ìˆ˜ì§‘ | 1ì´ˆ |
| ìƒí’ˆ ìˆ˜ì§‘ (50ê°œ) | 3ì´ˆ |
| í˜œíƒ ìˆ˜ì§‘ | 2ì´ˆ |
| FAQ ìˆ˜ì§‘ | 2ì´ˆ |
| ëŒ“ê¸€ ìˆ˜ì§‘ (100ê°œ) | 5ì´ˆ |
| Supabase ì €ì¥ | 3ì´ˆ |
| **ì´ ì†Œìš” ì‹œê°„** | **ì•½ 21ì´ˆ** |

---

## ğŸ”„ ì—…ë°ì´íŠ¸ ì´ë ¥

| ë²„ì „ | ë‚ ì§œ | ë³€ê²½ ë‚´ì—­ |
|------|------|----------|
| 1.0 | 2025-12-11 | ìµœì´ˆ ì‘ì„± |

---

## ğŸ“ ë¬¸ì˜

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:
1. ë¡œê·¸ íŒŒì¼: `crawler/logs/`
2. í˜ì´ì§€ ì†ŒìŠ¤: `page_source.html`
3. ìŠ¤í¬ë¦°ìƒ·: `screenshot.png`

---

**Â© 2025 Amore Pacific. All Rights Reserved.**

