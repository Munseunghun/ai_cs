# CS 응대 정보 UI 개선 (표 형태)

## 📋 문제 상황

라이브 방송 상세 조회 페이지의 **CS 응대용 정보** 섹션에서 예상 고객 질문이 JSON 문자열 형태로 표시되어 가독성이 매우 떨어졌습니다.

### 증상
```
{"category":"방송 일정","question":"라이브 방송은 언제 시작하나요?","frequency":"high","priority":1}
{"category":"방송 일정","question":"방송 시간이 몇 시간 동안 진행되나요?","frequency":"high","priority":2}
```

이러한 형태로 표시되어 CS 담당자가 정보를 파악하기 어려웠습니다.

## 🎯 개선 방향

카드 형태에서 **표(Table) 형태**로 변경하여 정보를 더 체계적이고 한눈에 파악할 수 있도록 개선했습니다.

## ✅ 개선 내용

### 1. 예상 고객 질문 섹션 - 표 형태

#### 개선 전
- JSON 문자열이 그대로 표시됨
- 카테고리, 빈도, 우선순위 정보가 구분되지 않음
- 중요도를 한눈에 파악하기 어려움

#### 개선 후 (표 형태)
- **5개 컬럼 테이블**로 구조화:
  1. **순번**: 번호 배지 (우선순위별 색상)
  2. **카테고리**: 방송 일정, 혜택, 상품, 주문/결제, 배송 등 (파란색 배지)
  3. **질문 내용**: 실제 질문 텍스트
  4. **빈도**: high(빨강), medium(주황), low(회색) 배지
  5. **우선순위**: 숫자 배지 (1-3: 빨강, 4-7: 주황, 8+: 회색)

- **우선순위별 행 배경색**:
  - 우선순위 1-3: 연한 빨강 (`#fff3f3`) - 매우 중요
  - 우선순위 4-7: 연한 노랑 (`#fff9e6`) - 중요
  - 우선순위 8+: 흰색 - 일반

- **호버 효과**: 마우스를 올리면 행 배경색이 진해짐
- **중요 질문 강조**: 우선순위 5 이하는 질문 텍스트를 굵게 표시

### 2. CS 응답 스크립트 섹션 - 표 형태

#### 개선 전
- 카드 형태로 Q&A가 분리되어 표시
- 여러 스크립트를 비교하기 어려움

#### 개선 후 (표 형태)
- **3개 컬럼 테이블**로 구조화:
  1. **순번**: 번호 배지 (파란색)
  2. **질문**: 고객 질문 (파란색 굵은 글씨)
  3. **답변**: CS 응답 스크립트

- **파란색 헤더**: 테이블 헤더를 연한 파란색(`#e3f2fd`)으로 강조
- **호버 효과**: 마우스를 올리면 행 배경색이 회색으로 변경
- **질문 강조**: 질문 컬럼은 파란색 굵은 글씨로 표시

### 3. 리스크 포인트 섹션 - 표 형태

#### 개선 전
- Alert 컴포넌트로 각 리스크를 개별 표시
- 위험도 비교가 어려움

#### 개선 후 (표 형태)
- **2개 컬럼 테이블**로 구조화:
  1. **위험도**: HIGH(빨강), MEDIUM(주황), LOW(회색) 배지 + 경고 아이콘
  2. **리스크 내용**: 상세 설명

- **빨간색 테두리**: 테이블 전체를 2px 빨간색 테두리로 강조
- **빨간색 헤더**: 테이블 헤더를 연한 빨강(`#ffebee`)으로 강조
- **위험도별 행 배경색**:
  - HIGH: 연한 빨강 (`#fff3f3`)
  - MEDIUM: 연한 노랑 (`#fff9e6`)
  - LOW: 흰색

- **호버 효과**: 마우스를 올리면 행 배경색이 진해짐
- **중요 리스크 강조**: HIGH 레벨은 텍스트를 굵게 표시

### 4. CS 노트 섹션

#### 변경 없음
- 파란색 정보 Alert 유지
- 여러 줄 텍스트 지원 (`whiteSpace: 'pre-wrap'`)
- 📌 아이콘으로 섹션 구분

## 🔧 기술적 개선 사항

### 1. JSON 파싱 로직 강화

```javascript
// CS 정보에서 예상 질문 추출 및 파싱
let _v_expected_questions = liveData.cs_info?.expected_questions || liveData.cs_response?.expected_questions || [];

// 문자열인 경우 JSON 파싱 시도
if (typeof _v_expected_questions === 'string') {
  try {
    _v_expected_questions = JSON.parse(_v_expected_questions);
  } catch (e) {
    console.warn('예상 질문 파싱 실패:', e);
    _v_expected_questions = [];
  }
}

// 배열이 아닌 경우 빈 배열로 초기화
if (!Array.isArray(_v_expected_questions)) {
  _v_expected_questions = [];
}
```

### 2. 객체와 문자열 모두 지원

```javascript
// 질문이 객체인 경우 (category, question, frequency, priority 등)
if (typeof question === 'object' && question !== null) {
  const _v_category = question.category || '일반';
  const _v_question_text = question.question || JSON.stringify(question);
  const _v_frequency = question.frequency || '';
  const _v_priority = question.priority || 0;
  
  // 우선순위에 따른 색상
  const _v_priority_color = _v_priority <= 3 ? 'error' : _v_priority <= 7 ? 'warning' : 'default';
  
  // ... 카드 렌더링
}

// 질문이 문자열인 경우
return (
  <Card>
    <Typography>{typeof question === 'string' ? question : JSON.stringify(question)}</Typography>
  </Card>
);
```

### 3. 빈 데이터 처리

```javascript
// 데이터가 없는 경우
if (_v_expected_questions.length === 0) {
  return (
    <Alert severity="info" sx={{ backgroundColor: '#f5f5f5' }}>
      <Typography variant="body2">예상 고객 질문 정보가 없습니다.</Typography>
    </Alert>
  );
}
```

## 📊 UI 컴포넌트 구조 (표 형태)

### 1. 예상 고객 질문 테이블
```
┌────────┬──────────┬─────────────────────────────────┬────────┬──────────┐
│ 순번   │ 카테고리 │ 질문 내용                        │ 빈도   │ 우선순위 │
├────────┼──────────┼─────────────────────────────────┼────────┼──────────┤
│  [1]   │ 방송일정 │ 라이브 방송은 언제 시작하나요?   │ [high] │   [1]    │ ← 빨간 배경
├────────┼──────────┼─────────────────────────────────┼────────┼──────────┤
│  [2]   │ 방송일정 │ 방송 시간이 몇 시간 동안 진행?   │ [high] │   [2]    │ ← 빨간 배경
├────────┼──────────┼─────────────────────────────────┼────────┼──────────┤
│  [3]   │   혜택   │ 라이브에서만 받을 수 있는 혜택?  │ [high] │   [4]    │ ← 노란 배경
├────────┼──────────┼─────────────────────────────────┼────────┼──────────┤
│  [4]   │   상품   │ 어떤 제품이 판매되나요?          │ [med]  │   [9]    │ ← 흰색 배경
└────────┴──────────┴─────────────────────────────────┴────────┴──────────┘
```

### 2. CS 응답 스크립트 테이블
```
┌────────┬─────────────────────────────────┬──────────────────────────────────┐
│ 순번   │ 질문                            │ 답변                              │
├────────┼─────────────────────────────────┼──────────────────────────────────┤
│  [1]   │ 라이브 방송은 언제 시작하나요?  │ 2025년 12월 20일 오후 7시에       │
│        │                                 │ 시작됩니다. 네이버 쇼핑라이브에서 │
│        │                                 │ 진행됩니다.                       │
├────────┼─────────────────────────────────┼──────────────────────────────────┤
│  [2]   │ 방송 시간이 몇 시간 동안 진행?  │ 약 2시간 동안 진행될 예정입니다.  │
└────────┴─────────────────────────────────┴──────────────────────────────────┘
```

### 3. 리스크 포인트 테이블
```
┌──────────┬───────────────────────────────────────────────────────┐
│ 위험도   │ 리스크 내용                                            │
├──────────┼───────────────────────────────────────────────────────┤
│ [⚠️HIGH] │ 재고가 한정되어 있으니 빠른 구매를 권장합니다.         │ ← 빨간 배경
├──────────┼───────────────────────────────────────────────────────┤
│ [⚠️MED]  │ 일부 제품은 배송이 지연될 수 있습니다.                 │ ← 노란 배경
└──────────┴───────────────────────────────────────────────────────┘
  ↑ 전체 테이블에 빨간색 테두리
```

## 🎨 색상 스키마

### 우선순위별 색상
- **우선순위 1-3 (매우 중요)**
  - 배경: `#fff3f3` (연한 빨강)
  - 테두리: `2px solid #f44336` (빨강)
  - 배지: `error` (빨강)

- **우선순위 4-7 (중요)**
  - 배경: `#fff9e6` (연한 노랑)
  - 테두리: `1px solid #ff9800` (주황)
  - 배지: `warning` (주황)

- **우선순위 8+ (일반)**
  - 배경: `#f5f5f5` (회색)
  - 테두리: 없음
  - 배지: `default` (회색)

### 섹션별 색상
- **예상 질문**: 우선순위별 색상
- **응답 스크립트**: `#f9f9f9` (연한 회색) + 파란색 강조
- **리스크 포인트**: `#fff3f3` (연한 빨강) + 빨간색 테두리
- **CS 노트**: `#e3f2fd` (연한 파랑) + 파란색 테두리

## 📱 반응형 디자인

- Grid 시스템 사용: `<Grid item xs={12}>`
- 모바일에서도 한 줄에 하나의 카드 표시
- 호버 효과는 데스크톱에서만 적용

## ✨ 애니메이션 효과

### 카드 호버 효과
```javascript
'&:hover': {
  boxShadow: 3,
  transform: 'translateY(-2px)'
}
```

### 응답 스크립트 호버 효과
```javascript
'&:hover': {
  boxShadow: 2,
  borderColor: '#2196f3'
}
```

## 📁 수정된 파일

- `/frontend/src/pages/LiveBroadcastDetail.jsx` (CS 응대 정보 섹션 전체 리팩토링)

## 🚀 배포 방법

### 프론트엔드 재시작
```bash
cd frontend
pkill -f "react-scripts"
npm start &
```

### 브라우저에서 확인
1. 라이브 방송 목록 페이지 접속
2. 임의의 라이브 방송 클릭
3. 하단의 "CS 응대용 정보" 아코디언 클릭
4. 예상 질문, 응답 스크립트, 리스크 포인트가 깔끔하게 표시되는지 확인

## 🎯 기대 효과

1. **가독성 대폭 향상**: JSON 문자열이 아닌 구조화된 표 형식으로 표시
2. **정보 비교 용이**: 표 형태로 여러 항목을 한눈에 비교 가능
3. **빠른 정보 검색**: 컬럼별로 정렬된 정보를 빠르게 찾을 수 있음
4. **중요도 즉시 파악**: 우선순위가 높은 질문을 색상으로 즉시 인지
5. **CS 업무 효율 향상**: 질문과 답변을 표 형태로 빠르게 스캔 가능
6. **전문적인 UI**: 표 형태로 더욱 전문적이고 체계적인 인상
7. **데이터 분석 용이**: 표 형태로 패턴과 트렌드를 쉽게 파악

### 표 형태의 장점
- **스캔 가능성**: 눈으로 빠르게 훑어볼 수 있음
- **비교 가능성**: 여러 항목을 동시에 비교 가능
- **정렬 가능성**: 향후 컬럼별 정렬 기능 추가 가능
- **필터링 가능성**: 향후 카테고리별 필터링 기능 추가 가능
- **데이터 밀도**: 같은 공간에 더 많은 정보 표시 가능

## 📝 추가 개선 가능 사항

### 1. 테이블 정렬 기능
- 컬럼 헤더 클릭 시 오름차순/내림차순 정렬
- 우선순위순, 빈도순, 카테고리순 정렬
- 정렬 상태 아이콘 표시 (▲▼)

### 2. 테이블 필터링 기능
- 카테고리별 필터 (방송 일정, 혜택, 상품 등)
- 빈도별 필터 (high, medium, low)
- 우선순위 범위 필터 (1-3, 4-7, 8+)

### 3. 검색 기능
- 테이블 상단에 검색창 추가
- 질문 내용, 답변 내용 실시간 검색
- 검색 결과 하이라이트

### 4. 페이지네이션
- 질문이 많을 경우 페이지 단위로 표시
- 페이지당 10개, 20개, 50개 선택 가능
- 전체 보기 옵션

### 5. 엑셀 내보내기
- 테이블 데이터를 Excel/CSV로 내보내기
- CS 담당자가 오프라인에서도 활용 가능
- 인쇄용 포맷 제공

### 6. 복사 기능
- 각 행의 복사 버튼 추가
- 전체 테이블 복사 기능
- 선택한 행만 복사하는 기능

### 7. 즐겨찾기/북마크
- 자주 사용하는 질문/답변을 즐겨찾기
- 즐겨찾기한 항목을 상단에 고정 표시
- 개인별 즐겨찾기 저장

### 8. 통계 정보
- 각 질문의 실제 문의 빈도 통계
- 가장 많이 조회된 질문 TOP 5
- 카테고리별 질문 분포 차트

### 9. 반응형 테이블
- 모바일에서는 카드 형태로 자동 전환
- 태블릿에서는 중요 컬럼만 표시
- 데스크톱에서는 전체 컬럼 표시

### 10. 컬럼 커스터마이징
- 사용자가 원하는 컬럼만 표시/숨김
- 컬럼 순서 변경 (드래그 앤 드롭)
- 컬럼 너비 조정

## 📸 스크린샷 예시

### 예상 고객 질문 테이블
- 우선순위 1-3: 빨간색 배경 (매우 중요)
- 우선순위 4-7: 노란색 배경 (중요)
- 우선순위 8+: 흰색 배경 (일반)
- 각 컬럼에 배지로 정보 표시

### CS 응답 스크립트 테이블
- 파란색 헤더로 섹션 구분
- 질문과 답변을 명확하게 분리
- 호버 시 행 강조

### 리스크 포인트 테이블
- 빨간색 테두리로 전체 강조
- 위험도별 색상 구분
- 경고 아이콘으로 시각적 강조

---

## 🔄 변경 이력

### v2.0 (2025-12-03) - 표 형태로 전환
- 카드 형태에서 표 형태로 UI 변경
- 예상 고객 질문: 5개 컬럼 테이블
- CS 응답 스크립트: 3개 컬럼 테이블
- 리스크 포인트: 2개 컬럼 테이블
- 정렬, 필터링, 검색 기능 추가 가능한 구조

### v1.0 (2025-12-03) - 카드 형태로 개선
- JSON 문자열에서 카드 형태로 변경
- 우선순위별 색상 구분
- 호버 효과 추가

---

**작성일**: 2025-12-03  
**최종 수정일**: 2025-12-03  
**작성자**: AI Assistant  
**관련 이슈**: CS 응대 정보가 JSON 문자열로 표시되어 가독성이 떨어짐  
**버전**: v2.0 (표 형태)
