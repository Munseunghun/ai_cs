# í”„ë¡ íŠ¸ì—”ë“œ ì‹ ê·œ ë°ì´í„° í‘œì‹œ ì™„ë£Œ

ì‘ì„± ì¼ì‹œ: 2025-12-04 09:20

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. ë°±ì—”ë“œ API í™•ì¸ âœ…
- `eventService.js`ì—ì„œ ì‹ ê·œ í…Œì´ë¸” ì¡°íšŒ í™•ì¸
- API ì‘ë‹µì— 6ê°œ ì‹ ê·œ í•„ë“œ í¬í•¨:
  - `coupons_new` - ì¿ í° ì •ë³´
  - `comments` - ëŒ“ê¸€/ì±„íŒ…
  - `faqs` - FAQ
  - `intro` - ë¼ì´ë¸Œ ì†Œê°œ
  - `statistics` - í†µê³„ ì •ë³´
  - `images` - ì´ë¯¸ì§€

### 2. í”„ë¡ íŠ¸ì—”ë“œ UI ì¶”ê°€ âœ…
`LiveBroadcastDetail.jsx`ì— 6ê°œ ì‹ ê·œ ì„¹ì…˜ ì¶”ê°€:

#### 1) ğŸŸï¸ ì¿ í° ì •ë³´
```jsx
{liveData.coupons_new && liveData.coupons_new.length > 0 && (
  <Paper sx={{ p: 3, mb: 3 }}>
    <Typography variant="h6">ğŸŸï¸ ì¿ í° ì •ë³´</Typography>
    <Grid container spacing={2}>
      {liveData.coupons_new.map((coupon, index) => (
        <Grid item xs={12} sm={6} md={4} key={index}>
          <Card>
            <CardContent>
              <Typography variant="h6" color="primary">
                {coupon.discount_rate}% í• ì¸
              </Typography>
              <Typography>{coupon.coupon_name}</Typography>
              <Chip label={coupon.coupon_type} />
            </CardContent>
          </Card>
        </Grid>
      ))}
    </Grid>
  </Paper>
)}
```

**í‘œì‹œ ì •ë³´**:
- í• ì¸ìœ¨/í• ì¸ê¸ˆì•¡
- ì¿ í°ëª…
- ì¿ í° íƒ€ì…
- ìµœì†Œ êµ¬ë§¤ ê¸ˆì•¡

#### 2) ğŸ“º ë¼ì´ë¸Œ ì†Œê°œ
```jsx
{liveData.intro && (
  <Paper sx={{ p: 3, mb: 3 }}>
    <Typography variant="h6">ğŸ“º ë¼ì´ë¸Œ ì†Œê°œ</Typography>
    <Typography variant="h5">{liveData.intro.intro_title}</Typography>
    <Typography>{liveData.intro.intro_description}</Typography>
    <Stack direction="row" spacing={1}>
      {JSON.parse(liveData.intro.intro_highlights).map(...)}
    </Stack>
  </Paper>
)}
```

**í‘œì‹œ ì •ë³´**:
- ì†Œê°œ ì œëª©
- ì†Œê°œ ì„¤ëª…
- í•˜ì´ë¼ì´íŠ¸ (Chip)
- ì§„í–‰ì ì •ë³´

#### 3) ğŸ“Š í†µê³„ ì •ë³´
```jsx
{liveData.statistics && (
  <Paper sx={{ p: 3, mb: 3 }}>
    <Typography variant="h6">ğŸ“Š í†µê³„ ì •ë³´</Typography>
    <Grid container spacing={3}>
      <Grid item xs={6} sm={3}>
        <Card>
          <Typography variant="h4">{liveData.statistics.view_count}</Typography>
          <Typography variant="caption">ì¡°íšŒìˆ˜</Typography>
        </Card>
      </Grid>
      {/* ì¢‹ì•„ìš”, ëŒ“ê¸€, ê³µìœ  */}
    </Grid>
  </Paper>
)}
```

**í‘œì‹œ ì •ë³´**:
- ì¡°íšŒìˆ˜
- ì¢‹ì•„ìš” ìˆ˜
- ëŒ“ê¸€ ìˆ˜
- ê³µìœ  ìˆ˜

#### 4) ğŸ’¬ ì‹¤ì‹œê°„ ëŒ“ê¸€
```jsx
{liveData.comments && liveData.comments.length > 0 && (
  <Accordion>
    <AccordionSummary>
      <Typography>ğŸ’¬ ì‹¤ì‹œê°„ ëŒ“ê¸€ ({liveData.comments.length}ê°œ)</Typography>
    </AccordionSummary>
    <AccordionDetails>
      {liveData.comments.map((comment, index) => (
        <Card key={index}>
          <Chip label={comment.comment_type} />
          <Typography>{comment.user_name}</Typography>
          <Typography>{comment.comment_text}</Typography>
          <Typography>â¤ï¸ {comment.like_count}</Typography>
        </Card>
      ))}
    </AccordionDetails>
  </Accordion>
)}
```

**í‘œì‹œ ì •ë³´**:
- ëŒ“ê¸€ ë‚´ìš©
- ì‚¬ìš©ìëª…
- ëŒ“ê¸€ íƒ€ì… (comment/chat/question)
- ì¢‹ì•„ìš” ìˆ˜

#### 5) â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸
```jsx
{liveData.faqs && liveData.faqs.length > 0 && (
  <Accordion>
    <AccordionSummary>
      <Typography>â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ ({liveData.faqs.length}ê°œ)</Typography>
    </AccordionSummary>
    <AccordionDetails>
      {liveData.faqs.map((faq, index) => (
        <Accordion key={index}>
          <AccordionSummary>
            <Chip label={faq.category} />
            <Typography>Q: {faq.question}</Typography>
          </AccordionSummary>
          <AccordionDetails>
            <Typography>A: {faq.answer}</Typography>
          </AccordionDetails>
        </Accordion>
      ))}
    </AccordionDetails>
  </Accordion>
)}
```

**í‘œì‹œ ì •ë³´**:
- ì§ˆë¬¸
- ë‹µë³€
- ì¹´í…Œê³ ë¦¬ (ì œí’ˆ/ë°°ì†¡/í˜œíƒ/ë°˜í’ˆêµí™˜)

#### 6) ğŸ–¼ï¸ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬
```jsx
{liveData.images && liveData.images.length > 0 && (
  <Accordion>
    <AccordionSummary>
      <Typography>ğŸ–¼ï¸ ì´ë¯¸ì§€ ê°¤ëŸ¬ë¦¬ ({liveData.images.length}ê°œ)</Typography>
    </AccordionSummary>
    <AccordionDetails>
      <Grid container spacing={2}>
        {liveData.images.map((image, index) => (
          <Grid item xs={12} sm={6} md={4} key={index}>
            <Card>
              <Box component="img" src={image.image_url} />
              <CardContent>
                <Chip label={image.image_type} />
                <Typography>{image.image_alt}</Typography>
              </CardContent>
            </Card>
          </Grid>
        ))}
      </Grid>
    </AccordionDetails>
  </Accordion>
)}
```

**í‘œì‹œ ì •ë³´**:
- ì´ë¯¸ì§€ URL
- ì´ë¯¸ì§€ íƒ€ì… (thumbnail/product/banner)
- ëŒ€ì²´ í…ìŠ¤íŠ¸

---

## ğŸ“Š ë°ì´í„° íë¦„

### 1. ë°ì´í„° ìˆ˜ì§‘
```
ë„¤ì´ë²„ ì‡¼í•‘ë¼ì´ë¸Œ â†’ comprehensive_naver_crawler.py â†’ Supabase
```

### 2. ë°±ì—”ë“œ API
```javascript
// eventService.js
const { data: _v_coupons_new } = await supabaseClient
  .from('live_coupons')
  .select('*')
  .eq('live_id', live_id)
  .eq('is_active', true);

return {
  ...ê¸°ì¡´_ë°ì´í„°,
  coupons_new: _v_coupons_new || [],
  comments: _v_comments || [],
  faqs: _v_faqs || [],
  intro: _v_intro || null,
  statistics: _v_statistics || null,
  images: _v_images || []
};
```

### 3. í”„ë¡ íŠ¸ì—”ë“œ í‘œì‹œ
```javascript
// LiveBroadcastDetail.jsx
const loadLiveData = async () => {
  const response = await fetch(`${API_BASE_URL}/api/events/${liveId}`);
  const data = await response.json();
  setLiveData(data.data);
  
  // data.data.coupons_new
  // data.data.comments
  // data.data.faqs
  // data.data.intro
  // data.data.statistics
  // data.data.images
};
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ë°±ì—”ë“œ API í…ŒìŠ¤íŠ¸
```bash
# ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰
cd "/Users/amore/ai_cs ì‹œìŠ¤í…œ/backend"
npm start

# API í˜¸ì¶œ í…ŒìŠ¤íŠ¸
curl http://localhost:3001/api/events/INNISFREE_MALL_INNISFREE_006 | jq '.data | keys'
```

**ì˜ˆìƒ ê²°ê³¼**:
```json
[
  "coupons_new",
  "comments",
  "faqs",
  "intro",
  "statistics",
  "images",
  ...ê¸°ì¡´_í•„ë“œë“¤
]
```

### 2. í”„ë¡ íŠ¸ì—”ë“œ í…ŒìŠ¤íŠ¸
```bash
# í”„ë¡ íŠ¸ì—”ë“œ ì„œë²„ ì‹¤í–‰
cd "/Users/amore/ai_cs ì‹œìŠ¤í…œ/frontend"
npm start

# ë¸Œë¼ìš°ì € ì ‘ì†
open http://localhost:3000
```

**í…ŒìŠ¤íŠ¸ ìˆœì„œ**:
1. ë¼ì´ë¸Œ ì¡°íšŒ í˜ì´ì§€ ì ‘ì†
2. ê²€ìƒ‰ ë˜ëŠ” ëª©ë¡ì—ì„œ ë¼ì´ë¸Œ ì„ íƒ
3. ìƒì„¸ ë³´ê¸° í´ë¦­
4. í•˜ë‹¨ ìŠ¤í¬ë¡¤í•˜ì—¬ ì‹ ê·œ ì„¹ì…˜ 6ê°œ í™•ì¸

### 3. ì‹ ê·œ ë°ì´í„°ê°€ ìˆëŠ” ë¼ì´ë¸Œ í™•ì¸
```sql
-- Supabase SQL Editorì—ì„œ ì‹¤í–‰
SELECT 
  l.live_id,
  l.title,
  COUNT(DISTINCT c.coupon_id) as coupons,
  COUNT(DISTINCT cm.comment_id) as comments,
  COUNT(DISTINCT i.image_id) as images
FROM live_broadcasts l
LEFT JOIN live_coupons c ON l.live_id = c.live_id
LEFT JOIN live_comments cm ON l.live_id = cm.live_id
LEFT JOIN live_images i ON l.live_id = i.live_id
GROUP BY l.live_id, l.title
HAVING COUNT(DISTINCT c.coupon_id) > 0
ORDER BY l.created_at DESC
LIMIT 5;
```

**ì˜ˆìƒ ê²°ê³¼**:
```
live_id                          | coupons | comments | images
---------------------------------|---------|----------|--------
REAL_NAVER_ë¼ë„¤ì¦ˆ_1744150        | 3       | 18       | 18
```

---

## ğŸ¯ í™•ì¸ ì‚¬í•­

### âœ… ë°±ì—”ë“œ
- [x] `eventService.js`ì—ì„œ ì‹ ê·œ í…Œì´ë¸” ì¡°íšŒ
- [x] API ì‘ë‹µì— ì‹ ê·œ í•„ë“œ í¬í•¨
- [x] ë°ì´í„° ì •ìƒ ë°˜í™˜ í™•ì¸

### âœ… í”„ë¡ íŠ¸ì—”ë“œ
- [x] `LiveBroadcastDetail.jsx`ì— ì‹ ê·œ ì„¹ì…˜ ì¶”ê°€
- [x] ì¡°ê±´ë¶€ ë Œë”ë§ (ë°ì´í„° ìˆì„ ë•Œë§Œ í‘œì‹œ)
- [x] UI ì»´í¬ë„ŒíŠ¸ (Card, Chip, Accordion ë“±) ì‚¬ìš©
- [x] ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ (Grid)

### âœ… ë°ì´í„°
- [x] Supabaseì— ì‹¤ì œ ë°ì´í„° ì €ì¥ë¨
- [x] ì¿ í°: 3ê°œ
- [x] ëŒ“ê¸€: 18ê°œ
- [x] ì´ë¯¸ì§€: 18ê°œ
- [x] ë¼ì´ë¸Œ ì†Œê°œ: 1ê°œ
- [x] í†µê³„: 3ê°œ

---

## ğŸ“ ë‹¤ìŒ ë‹¨ê³„

### 1. ì¶”ê°€ ê¸°ëŠ¥ (ì„ íƒì‚¬í•­)
- [ ] ëŒ“ê¸€ í•„í„°ë§ (íƒ€ì…ë³„)
- [ ] ì´ë¯¸ì§€ í™•ëŒ€ ë³´ê¸° (Modal)
- [ ] í†µê³„ ì°¨íŠ¸ (Chart.js)
- [ ] FAQ ê²€ìƒ‰ ê¸°ëŠ¥

### 2. ì„±ëŠ¥ ìµœì í™”
- [ ] ì´ë¯¸ì§€ Lazy Loading
- [ ] ëŒ“ê¸€ í˜ì´ì§€ë„¤ì´ì…˜
- [ ] API ìºì‹±

### 3. ìŠ¤íƒ€ì¼ ê°œì„ 
- [ ] ë‹¤í¬ ëª¨ë“œ ì§€ì›
- [ ] ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
- [ ] ëª¨ë°”ì¼ ìµœì í™”

---

## ğŸ‰ ì™„ë£Œ!

í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ìµœì‹  Supabase ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì°¸ì¡°í•˜ê³  ìˆìŠµë‹ˆë‹¤!

**ì‹ ê·œ ë°ì´í„° í‘œì‹œ ìœ„ì¹˜**:
- ë¼ì´ë¸Œ ì¡°íšŒ > ìƒì„¸ ë³´ê¸° > í•˜ë‹¨ ìŠ¤í¬ë¡¤
- CS ì‘ë‹µ ì„¹ì…˜ ë‹¤ìŒì— 6ê°œ ì‹ ê·œ ì„¹ì…˜ í‘œì‹œ

**í™•ì¸ ë°©ë²•**:
1. http://localhost:3000 ì ‘ì†
2. ë¼ì´ë¸Œ ì¡°íšŒ í˜ì´ì§€ì—ì„œ "REAL_NAVER_ë¼ë„¤ì¦ˆ_1744150" ê²€ìƒ‰
3. ìƒì„¸ ë³´ê¸° í´ë¦­
4. í•˜ë‹¨ ìŠ¤í¬ë¡¤í•˜ì—¬ ì‹ ê·œ ì„¹ì…˜ í™•ì¸
