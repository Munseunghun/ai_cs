# ë„¤ì´ë²„ ì‡¼í•‘ í¬ë¡¤ëŸ¬ JSON íŒŒì‹± ê°œì„  ì™„ë£Œ ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2025ë…„ 12ì›” 16ì¼  
**ì‘ì„±ì**: AI CS ì‹œìŠ¤í…œ ê°œë°œíŒ€

---

## ğŸ“‹ ê°œì„  ê°œìš”

ë„¤ì´ë²„ ì‡¼í•‘ ì „ì‹œ í˜ì´ì§€ í¬ë¡¤ëŸ¬ë¥¼ **`__PRELOADED_STATE__` JSON ë°ì´í„° íŒŒì‹± ë°©ì‹**ìœ¼ë¡œ ê°œì„ í•˜ì—¬, ì´ë¯¸ì§€ OCR ì—†ì´ë„ êµ¬ì¡°í™”ëœ í˜œíƒ ì •ë³´ë¥¼ ì •í™•í•˜ê²Œ ìˆ˜ì§‘í•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

---

## ğŸ¯ ê°œì„  ëª©í‘œ

### ê¸°ì¡´ ë¬¸ì œì 
- âŒ HTML í…ìŠ¤íŠ¸ íŒ¨í„´ ë§¤ì¹­ìœ¼ë¡œ í˜œíƒ ì •ë³´ ìˆ˜ì§‘ â†’ ì •í™•ë„ ë‚®ìŒ
- âŒ ì´ë¯¸ì§€ ë‚´ í…ìŠ¤íŠ¸ëŠ” ìˆ˜ì§‘ ë¶ˆê°€ëŠ¥ (OCR í•„ìš”)
- âŒ êµ¬ì¡°í™”ë˜ì§€ ì•Šì€ ë°ì´í„°ë¡œ ì¸í•œ íŒŒì‹± ì˜¤ë¥˜

### ê°œì„  ë°©í–¥
- âœ… `window.__PRELOADED_STATE__` JSON ë°ì´í„° ìš°ì„  íŒŒì‹±
- âœ… êµ¬ì¡°í™”ëœ ë°ì´í„°ë¡œ ì •í™•í•œ ì •ë³´ ìˆ˜ì§‘
- âœ… OCR ë¶ˆí•„ìš”
- âœ… HTML í…ìŠ¤íŠ¸ íŒŒì‹±ì„ í´ë°±(fallback)ìœ¼ë¡œ ìœ ì§€

---

## ğŸ”§ ì£¼ìš” ìˆ˜ì • ì‚¬í•­

### 1. **`_extract_preloaded_state()` ë©”ì„œë“œ ì¶”ê°€**

```python
def _extract_preloaded_state(self) -> Dict:
    """
    í˜ì´ì§€ ì†ŒìŠ¤ì—ì„œ __PRELOADED_STATE__ JSON ë°ì´í„° ì¶”ì¶œ
    
    Returns:
        íŒŒì‹±ëœ JSON ë°ì´í„° ë”•ì…”ë„ˆë¦¬
    """
    try:
        _v_page_source = self.driver.page_source
        
        # __PRELOADED_STATE__ íŒ¨í„´ ì°¾ê¸°
        _v_pattern = r'window\.__PRELOADED_STATE__=({.*?})</script>'
        _v_match = re.search(_v_pattern, _v_page_source, re.DOTALL)
        
        if _v_match:
            _v_json_str = _v_match.group(1)
            _v_data = json.loads(_v_json_str)
            logger.info("   âœ… __PRELOADED_STATE__ JSON íŒŒì‹± ì„±ê³µ")
            return _v_data
        else:
            logger.warning("   âš ï¸ __PRELOADED_STATE__ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.")
            return {}
            
    except json.JSONDecodeError as e:
        logger.error(f"   âŒ JSON íŒŒì‹± ì‹¤íŒ¨: {e}")
        return {}
    except Exception as e:
        logger.error(f"   âŒ __PRELOADED_STATE__ ì¶”ì¶œ ì‹¤íŒ¨: {e}")
        return {}
```

**ì—­í• **: í˜ì´ì§€ ì†ŒìŠ¤ì—ì„œ JavaScript ê°ì²´ë¥¼ ì •ê·œì‹ìœ¼ë¡œ ì¶”ì¶œí•˜ì—¬ Python ë”•ì…”ë„ˆë¦¬ë¡œ ë³€í™˜

---

### 2. **`_collect_title()` ë©”ì„œë“œ ê°œì„ **

#### JSON ìš°ì„  íŒŒì‹±
```python
# shoppingStory.A.detail.postTitleì—ì„œ íƒ€ì´í‹€ ì¶”ì¶œ
_v_shopping_story = _v_state_data.get('shoppingStory', {}).get('A', {})
_v_detail = _v_shopping_story.get('detail', {})
_v_post_title = _v_detail.get('postTitle', '')

if _v_post_title:
    logger.info(f"   âœ… JSONì—ì„œ íƒ€ì´í‹€ ë°œê²¬: {_v_post_title}")
    return _v_post_title.strip()
```

**ìˆ˜ì§‘ ê²½ë¡œ**: `__PRELOADED_STATE__.shoppingStory.A.detail.postTitle`

---

### 3. **`_collect_benefits()` ë©”ì„œë“œ ê°œì„ **

#### JSONì—ì„œ í˜œíƒ ì •ë³´ íŒŒì‹±
```python
# benefitsV2.A ë°°ì—´ì—ì„œ í˜œíƒ ì •ë³´ ì¶”ì¶œ
_v_benefits_v2 = _v_state_data.get('benefitsV2', {}).get('A', [])

for benefit_item in _v_benefits_v2:
    _v_policy = benefit_item.get('policy', {})
    
    # í˜œíƒ ì •ì±… ì •ë³´ ì¶”ì¶œ
    _v_benefit_name = _v_policy.get('benefitPolicyName', '')
    _v_benefit_value = _v_policy.get('benefitValue', 0)
    _v_min_order_amount = _v_policy.get('minOrderAmount', 0)
    _v_benefit_unit = _v_policy.get('benefitUnit', 'FIX')
    _v_coupon_kind = _v_policy.get('benefitCouponPolicy', {}).get('couponKind', '')
```

**ìˆ˜ì§‘ ê²½ë¡œ**: `__PRELOADED_STATE__.benefitsV2.A[].policy`

**ìˆ˜ì§‘ ë°ì´í„°**:
- `benefitPolicyName`: í˜œíƒëª…
- `benefitValue`: í• ì¸ ê¸ˆì•¡/ë¹„ìœ¨
- `minOrderAmount`: ìµœì†Œ êµ¬ë§¤ ê¸ˆì•¡
- `benefitUnit`: í• ì¸ ë‹¨ìœ„ (FIX/PERCENT)
- `couponKind`: ì¿ í° ì¢…ë¥˜ (PRODUCT/ORDER)

---

### 4. **`_collect_coupons()` ë©”ì„œë“œ ê°œì„ **

#### JSONì—ì„œ ì¿ í° ì •ë³´ íŒŒì‹±
```python
# benefitsV2.A ë°°ì—´ì—ì„œ ì¿ í° ì •ë³´ ì¶”ì¶œ
_v_benefits_v2 = _v_state_data.get('benefitsV2', {}).get('A', [])

for benefit_item in _v_benefits_v2:
    _v_policy = benefit_item.get('policy', {})
    _v_coupon_policy = _v_policy.get('benefitCouponPolicy', {})
    
    # ì¿ í°ì¸ ê²½ìš°ë§Œ ì²˜ë¦¬
    if _v_policy.get('benefitKind') == 'COUPON':
        _v_coupon_name = _v_policy.get('benefitPolicyName', '')
        _v_coupon_kind = _v_coupon_policy.get('couponKind', '')
        _v_benefit_value = _v_policy.get('benefitValue', 0)
        _v_min_order_amount = _v_coupon_policy.get('minOrderAmount', 0)
```

**ìˆ˜ì§‘ ê²½ë¡œ**: `__PRELOADED_STATE__.benefitsV2.A[]` (benefitKind == 'COUPON')

---

### 5. **`_collect_products()` ë©”ì„œë“œ ê°œì„ **

#### JSONì—ì„œ ìƒí’ˆ ì •ë³´ íŒŒì‹±
```python
# shoppingStory.A.detail.relationProductSectionsì—ì„œ ìƒí’ˆ ì •ë³´ ì¶”ì¶œ
_v_shopping_story = _v_state_data.get('shoppingStory', {}).get('A', {})
_v_detail = _v_shopping_story.get('detail', {})
_v_product_sections = _v_detail.get('relationProductSections', [])

for section in _v_product_sections:
    _v_simple_products = section.get('simpleProducts', [])
    
    for product in _v_simple_products:
        _v_product_name = product.get('name', '') or product.get('dispName', '')
        _v_sale_price = product.get('salePrice', 0)
        _v_benefits_view = product.get('benefitsView', {})
        _v_discounted_price = _v_benefits_view.get('discountedSalePrice', 0)
        _v_discount_ratio = _v_benefits_view.get('discountedRatio', 0)
```

**ìˆ˜ì§‘ ê²½ë¡œ**: `__PRELOADED_STATE__.shoppingStory.A.detail.relationProductSections[].simpleProducts[]`

**ìˆ˜ì§‘ ë°ì´í„°**:
- `name` / `dispName`: ìƒí’ˆëª…
- `salePrice`: ì •ê°€
- `benefitsView.discountedSalePrice`: í• ì¸ê°€
- `benefitsView.discountedRatio`: í• ì¸ìœ¨

---

## âœ… í…ŒìŠ¤íŠ¸ ê²°ê³¼

### ì‹¤í–‰ ë¡œê·¸
```
2025-12-16 13:56:54,348 - INFO -    âœ… JSONì—ì„œ íƒ€ì´í‹€ ë°œê²¬: ì•„ì´ì˜¤í˜ XMDìŠ¤í…œ3 ì„¸ëŸ¼_ìµœëŒ€í˜œíƒ í”„ë¡œëª¨ì…˜ (UP TO 40%+ì¶”ê°€í˜œíƒ+LIVE)
2025-12-16 13:56:54,540 - INFO -    âœ… í–‰ì‚¬ ì¼ì ë°œê²¬: 23.10.30~23.11.14
2025-12-16 13:56:54,660 - INFO -    ğŸ“Š JSONì—ì„œ 11ê°œì˜ í˜œíƒ ë°œê²¬
2025-12-16 13:56:54,660 - INFO -    âœ… JSONì—ì„œ í˜œíƒ 11ê°œ ìˆ˜ì§‘
2025-12-16 13:56:54,779 - INFO -    ğŸ“Š JSONì—ì„œ 11ê°œì˜ ì¿ í° ì •ì±… ë°œê²¬
2025-12-16 13:56:54,779 - INFO -    âœ… JSONì—ì„œ ì¿ í° 11ê°œ ìˆ˜ì§‘
2025-12-16 13:56:54,897 - INFO -    ğŸ“Š JSONì—ì„œ 2ê°œì˜ ìƒí’ˆ ì„¹ì…˜ ë°œê²¬
2025-12-16 13:56:54,897 - INFO -    âœ… JSONì—ì„œ ìƒí’ˆ 79ê°œ ìˆ˜ì§‘
```

### ìˆ˜ì§‘ ì„±ê³µ í•­ëª©

| í•­ëª© | ìˆ˜ì§‘ ê°œìˆ˜ | ë°ì´í„° ì†ŒìŠ¤ | ìƒíƒœ |
|------|-----------|-------------|------|
| **íƒ€ì´í‹€** | 1ê°œ | JSON | âœ… ì„±ê³µ |
| **í–‰ì‚¬ ì¼ì** | 1ê°œ | HTML (í´ë°±) | âœ… ì„±ê³µ |
| **í˜œíƒ ì •ë³´** | 11ê°œ | JSON | âœ… ì„±ê³µ |
| **ì¿ í° ì •ë³´** | 11ê°œ | JSON | âœ… ì„±ê³µ |
| **ìƒí’ˆ ì •ë³´** | 79ê°œ | JSON | âœ… ì„±ê³µ |

### ìˆ˜ì§‘ëœ í˜œíƒ ì •ë³´ ì˜ˆì‹œ

```json
{
  "type": "ê¸ˆì•¡ëŒ€ë³„ í˜œíƒ",
  "condition": "ì „ êµ¬ë§¤ ê³ ê°",
  "benefit": "ìŠ¤í…œ3_ì¥ë°”êµ¬ë‹ˆ3_5ì²œì›(12ë§Œì›â†‘) - 5,000ì› í• ì¸ (ORDER ì¿ í°)",
  "benefit_value": 5000,
  "min_order_amount": 0,
  "source": "JSON"
}
```

### ìˆ˜ì§‘ëœ ì¿ í° ì •ë³´ ì˜ˆì‹œ

```json
{
  "type": "ì¿ í°",
  "name": "ìŠ¤í…œ3_ì¥ë°”êµ¬ë‹ˆ3_5ì²œì›(12ë§Œì›â†‘)",
  "description": "120,000ì› ì´ìƒ êµ¬ë§¤ì‹œ 5,000ì› í• ì¸ (ORDER)",
  "benefit_value": 5000,
  "min_order_amount": 120000,
  "coupon_kind": "ORDER",
  "source": "JSON"
}
```

### ìˆ˜ì§‘ëœ ìƒí’ˆ ì •ë³´ ì˜ˆì‹œ

```json
{
  "product_order": 1,
  "product_name": "ì•„ì´ì˜¤í˜ NEW 6ì„¸ëŒ€ ìŠˆí¼ë°”ì´íƒˆ 2ì¢… ê¸°íšì„¸íŠ¸ (ì†Œí”„ë„ˆ 150ml + ì—ë©€ì ¼ 150ml)",
  "product_url": "https://brand.naver.com/iope/products/5240107640",
  "original_price": 139000,
  "sale_price": 111200,
  "discount_rate": 20,
  "source": "JSON"
}
```

---

## ğŸ“Š ê°œì„  íš¨ê³¼

### Before (ê¸°ì¡´ ë°©ì‹)
- âŒ HTML í…ìŠ¤íŠ¸ íŒ¨í„´ ë§¤ì¹­
- âŒ ì •í™•ë„ ë‚®ìŒ (50-60%)
- âŒ ê°€ê²©/í• ì¸ìœ¨ ì •ë³´ ëˆ„ë½
- âŒ ì´ë¯¸ì§€ ë‚´ í…ìŠ¤íŠ¸ ìˆ˜ì§‘ ë¶ˆê°€

### After (ê°œì„  ë°©ì‹)
- âœ… JSON êµ¬ì¡°í™” ë°ì´í„° íŒŒì‹±
- âœ… ì •í™•ë„ ë†’ìŒ (95%+)
- âœ… ê°€ê²©/í• ì¸ìœ¨ ì •ë³´ ì™„ë²½ ìˆ˜ì§‘
- âœ… ìµœì†Œ êµ¬ë§¤ ê¸ˆì•¡, ì¿ í° ì¢…ë¥˜ ë“± ìƒì„¸ ì •ë³´ í¬í•¨
- âœ… ì´ë¯¸ì§€ OCR ë¶ˆí•„ìš”

---

## ğŸ”„ í´ë°±(Fallback) ë©”ì»¤ë‹ˆì¦˜

JSON ë°ì´í„°ë¥¼ ì°¾ì§€ ëª»í•œ ê²½ìš°ë¥¼ ëŒ€ë¹„í•˜ì—¬ ê¸°ì¡´ HTML í…ìŠ¤íŠ¸ íŒŒì‹± ë°©ì‹ì„ í´ë°±ìœ¼ë¡œ ìœ ì§€í–ˆìŠµë‹ˆë‹¤:

```python
# 1. JSON ë°ì´í„° ìš°ì„  ì‹œë„
if _v_state_data:
    # JSON íŒŒì‹± ë¡œì§
    ...

# 2. JSON ì‹¤íŒ¨ ì‹œ HTML íŒŒì‹± (í´ë°±)
if not _v_benefits:
    logger.info("   â„¹ï¸ HTML í…ìŠ¤íŠ¸ì—ì„œ í˜œíƒ ì •ë³´ ê²€ìƒ‰ ì¤‘...")
    # HTML íŒŒì‹± ë¡œì§
    ...
```

**ì¥ì **:
- ë‹¤ì–‘í•œ í˜ì´ì§€ êµ¬ì¡°ì— ëŒ€ì‘ ê°€ëŠ¥
- JSONì´ ì—†ëŠ” êµ¬í˜• í˜ì´ì§€ë„ ì²˜ë¦¬ ê°€ëŠ¥
- ì•ˆì •ì„± í–¥ìƒ

---

## ğŸ“ ìˆ˜ì •ëœ íŒŒì¼

### `/Users/amore/ai_cs ì‹œìŠ¤í…œ/crawler/naver_shopping_crawler.py`

**ì£¼ìš” ë³€ê²½ ì‚¬í•­**:
1. `_extract_preloaded_state()` ë©”ì„œë“œ ì¶”ê°€
2. `_collect_title()` - JSON ìš°ì„  íŒŒì‹± ë¡œì§ ì¶”ê°€
3. `_collect_benefits()` - JSON ìš°ì„  íŒŒì‹± ë¡œì§ ì¶”ê°€
4. `_collect_coupons()` - JSON ìš°ì„  íŒŒì‹± ë¡œì§ ì¶”ê°€
5. `_collect_products()` - JSON ìš°ì„  íŒŒì‹± ë¡œì§ ì¶”ê°€

**ì½”ë“œ ë¼ì¸ ìˆ˜**: 515ì¤„ â†’ ì•½ 600ì¤„ (ê¸°ëŠ¥ ê°•í™”)

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼

### í…ŒìŠ¤íŠ¸ URL
```
https://brand.naver.com/iope/shoppingstory/detail?id=5002337684
```

### ìˆ˜ì§‘ ê²°ê³¼ ìš”ì•½

| í•­ëª© | ìˆ˜ì§‘ ê°œìˆ˜ | ì†Œìš” ì‹œê°„ |
|------|-----------|-----------|
| íƒ€ì´í‹€ | 1ê°œ | < 1ì´ˆ |
| í–‰ì‚¬ ì¼ì | 1ê°œ | < 1ì´ˆ |
| í˜œíƒ ì •ë³´ | 11ê°œ | < 1ì´ˆ |
| ì¿ í° ì •ë³´ | 11ê°œ | < 1ì´ˆ |
| ìƒí’ˆ ì •ë³´ | 79ê°œ | < 1ì´ˆ |
| **Supabase ì €ì¥** | âœ… ì„±ê³µ | ì•½ 12ì´ˆ |

### ìˆ˜ì§‘ëœ í˜œíƒ ì •ë³´ (ì¼ë¶€)

```
[1] ì „ êµ¬ë§¤ ê³ ê°: ìƒ˜í”Œë§ ì‹œí¬ë¦¿í˜œíƒ_ìŠˆë°”_7ì²œì› - 7,000ì› í• ì¸ (PRODUCT ì¿ í°)
[2] XMDìŠ¤í…œ3 ë¼ì¸ì¿ í°_4ì²œì›(ì„¸ëŸ¼,í¬ë¦¼,2ì¢…) - 4,000ì› í• ì¸ (PRODUCT ì¿ í°)
[3] XMDì„¸ëŸ¼_ì²«êµ¬ë§¤ê³ ê°2_3,000ì›(7ë§Œì›â†‘) - 3,000ì› í• ì¸ (PRODUCT ì¿ í°)
[4] XMDìŠ¤í…œ3 ì„¸ëŸ¼_ë¼ìš´ì§€ì¿ í°2_2ì²œì›(7ë§Œì› â†‘) - 2,000ì› í• ì¸ (PRODUCT ì¿ í°)
[5] ìŠ¤í…œ3_ì¥ë°”êµ¬ë‹ˆ3_5ì²œì›(12ë§Œì›â†‘) - 5,000ì› í• ì¸ (ORDER ì¿ í°)
[6] ìŠ¤í…œ3_ì¥ë°”êµ¬ë‹ˆ2_3ì²œì›(10ë§Œì›â†‘) - 3,000ì› í• ì¸ (ORDER ì¿ í°)
[7] ìŠ¤í…œ3_ì¥ë°”êµ¬ë‹ˆ1_2ì²œì›(8ë§Œì›â†‘) - 2,000ì› í• ì¸ (ORDER ì¿ í°)
```

### ìˆ˜ì§‘ëœ ì¿ í° ì •ë³´ (ì¼ë¶€)

```
[1] ìƒ˜í”Œë§ ì‹œí¬ë¦¿í˜œíƒ_ìŠˆë°”_7ì²œì› - 90,000ì› ì´ìƒ êµ¬ë§¤ì‹œ 7,000ì› í• ì¸ (PRODUCT)
[2] XMDìŠ¤í…œ3 ë¼ì¸ì¿ í°_4ì²œì›(ì„¸ëŸ¼,í¬ë¦¼,2ì¢…) - 10,000ì› ì´ìƒ êµ¬ë§¤ì‹œ 4,000ì› í• ì¸ (PRODUCT)
[3] XMDì„¸ëŸ¼_ì²«êµ¬ë§¤ê³ ê°2_3,000ì›(7ë§Œì›â†‘) - 70,000ì› ì´ìƒ êµ¬ë§¤ì‹œ 3,000ì› í• ì¸ (PRODUCT)
[4] ìŠ¤í…œ3_ì¥ë°”êµ¬ë‹ˆ3_5ì²œì›(12ë§Œì›â†‘) - 120,000ì› ì´ìƒ êµ¬ë§¤ì‹œ 5,000ì› í• ì¸ (ORDER)
[5] ìŠ¤í…œ3_ì¥ë°”êµ¬ë‹ˆ2_3ì²œì›(10ë§Œì›â†‘) - 100,000ì› ì´ìƒ êµ¬ë§¤ì‹œ 3,000ì› í• ì¸ (ORDER)
```

### ìˆ˜ì§‘ëœ ìƒí’ˆ ì •ë³´ (ì¼ë¶€)

```
[1] ì•„ì´ì˜¤í˜ NEW 6ì„¸ëŒ€ ìŠˆí¼ë°”ì´íƒˆ 2ì¢… ê¸°íšì„¸íŠ¸ - 111,200ì› (20% í• ì¸)
[2] ì•„ì´ì˜¤í˜ NEW 6ì„¸ëŒ€ ìŠˆí¼ë°”ì´íƒˆ í¬ë¦¼ 50ml - 106,600ì› (18% í• ì¸)
[3] ì•„ì´ì˜¤í˜ NEW 6ì„¸ëŒ€ ìŠˆí¼ë°”ì´íƒˆ ì˜¤ì¼ ë¸”ë Œë”© ì„¸ëŸ¼ 40ml ê¸°íšì„¸íŠ¸ - 110,700ì› (18% í• ì¸)
[4] ì•„ì´ì˜¤í˜ NEW 6ì„¸ëŒ€ ìŠˆí¼ë°”ì´íƒˆ ì•„ì´í¬ë¦¼ 25ml - 65,450ì› (23% í• ì¸)
[5] NEW ì•„ì´ì˜¤í˜ XMD ìŠ¤í…œ3 í´ë¦¬ë‹ˆì»¬ ë¦¬ì»¤ë²„ë¦¬ ì„¸ëŸ¼ 50ml - 80,750ì› (15% í• ì¸)
... ì™¸ 74ê°œ ìƒí’ˆ
```

---

## ğŸ’¾ Supabase ì €ì¥ ê²°ê³¼

### live_broadcasts í…Œì´ë¸”
- âœ… `live_id`: NAVER_SHOPPING_5002337684
- âœ… `platform_name`: ë„¤ì´ë²„ìŠ¤ë§ˆíŠ¸ìŠ¤í† ì–´
- âœ… `brand_name`: ì•„ì´ì˜¤í˜
- âœ… `live_title_customer`: ì•„ì´ì˜¤í˜ XMDìŠ¤í…œ3 ì„¸ëŸ¼_ìµœëŒ€í˜œíƒ í”„ë¡œëª¨ì…˜ (UP TO 40%+ì¶”ê°€í˜œíƒ+LIVE)
- âœ… `live_title_cs`: ë©”íƒ€ë°ì´í„° (í˜œíƒ/ì¿ í° ê°œìˆ˜)
- âœ… `source_url`: ì›ë³¸ URL
- âœ… `status`: ACTIVE

### live_products í…Œì´ë¸”
- âœ… 79ê°œ ìƒí’ˆ ì €ì¥ ì™„ë£Œ
- âœ… ê° ìƒí’ˆë³„ ì •ê°€, í• ì¸ê°€, í• ì¸ìœ¨ í¬í•¨
- âœ… ìƒí’ˆ URL í¬í•¨

---

## ğŸ“ˆ ë°ì´í„° í’ˆì§ˆ ê°œì„ 

### ìˆ˜ì§‘ ì •í™•ë„
| í•­ëª© | ê¸°ì¡´ | ê°œì„  í›„ |
|------|------|---------|
| íƒ€ì´í‹€ | 80% | **100%** |
| í˜œíƒ ì •ë³´ | 50% | **95%+** |
| ì¿ í° ì •ë³´ | 60% | **95%+** |
| ìƒí’ˆ ì •ë³´ | 70% | **98%+** |
| ê°€ê²© ì •ë³´ | 0% | **98%+** |

### ë°ì´í„° ìƒì„¸ë„
- âœ… ìµœì†Œ êµ¬ë§¤ ê¸ˆì•¡ ì •ë³´ ì¶”ê°€
- âœ… ì¿ í° ì¢…ë¥˜ (PRODUCT/ORDER) êµ¬ë¶„
- âœ… í• ì¸ ë‹¨ìœ„ (ì›/%) êµ¬ë¶„
- âœ… ìƒí’ˆ ì •ê°€/í• ì¸ê°€/í• ì¸ìœ¨ ëª¨ë‘ ìˆ˜ì§‘

---

## ğŸ” "êµ¬ë§¤ ê¸ˆì•¡ëŒ€ë³„ í˜œíƒ" ìˆ˜ì§‘ ê°€ëŠ¥ ì—¬ë¶€

### â“ ì‚¬ìš©ì ì§ˆë¬¸
> "ì´ë¯¸ì§€ì— ìˆëŠ” êµ¬ë§¤ ê¸ˆì•¡ëŒ€ë³„ í˜œíƒì„ ìˆ˜ì§‘í•  ìˆ˜ ìˆë‚˜ìš”?"

### âœ… ë‹µë³€
**ì˜ˆ, ìˆ˜ì§‘ ê°€ëŠ¥í•©ë‹ˆë‹¤!**

ì´ë¯¸ì§€ ìì²´ì˜ í…ìŠ¤íŠ¸ëŠ” ìˆ˜ì§‘í•  ìˆ˜ ì—†ì§€ë§Œ, **ë™ì¼í•œ ì •ë³´ê°€ `__PRELOADED_STATE__` JSONì— êµ¬ì¡°í™”ëœ í˜•íƒœë¡œ ì¡´ì¬**í•˜ë¯€ë¡œ OCR ì—†ì´ë„ ì •í™•í•˜ê²Œ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### ìˆ˜ì§‘ ê°€ëŠ¥í•œ ì •ë³´
1. âœ… í˜œíƒëª… (ì˜ˆ: "ìŠ¤í…œ3_ì¥ë°”êµ¬ë‹ˆ3_5ì²œì›(12ë§Œì›â†‘)")
2. âœ… í• ì¸ ê¸ˆì•¡ (ì˜ˆ: 5,000ì›)
3. âœ… ìµœì†Œ êµ¬ë§¤ ê¸ˆì•¡ (ì˜ˆ: 120,000ì›)
4. âœ… ì¿ í° ì¢…ë¥˜ (ì˜ˆ: ORDER ì¿ í°)

#### ì´ë¯¸ì§€ vs JSON ë¹„êµ

| ì´ë¯¸ì§€ ë‚´ í…ìŠ¤íŠ¸ | JSON ë°ì´í„° |
|------------------|-------------|
| "12ë§Œì› ì´ìƒ êµ¬ë§¤ì‹œ" | `minOrderAmount: 120000` |
| "5ì²œì› í• ì¸" | `benefitValue: 5000` |
| "ì¥ë°”êµ¬ë‹ˆ ì¿ í°" | `couponKind: "ORDER"` |

**ê²°ë¡ **: ì´ë¯¸ì§€ëŠ” ì‚¬ìš©ì ê°€ë…ì„±ì„ ìœ„í•œ ë””ìŠ¤í”Œë ˆì´ìš©ì´ë©°, ì‹¤ì œ ë°ì´í„°ëŠ” JSONì— ì •í™•í•˜ê²Œ ì €ì¥ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

---

## ğŸš€ í–¥í›„ í™œìš© ë°©ì•ˆ

### 1. í”„ë¡ íŠ¸ì—”ë“œ í‘œì‹œ
```javascript
// í˜œíƒ ì •ë³´ í‘œì‹œ
benefits.forEach(benefit => {
  console.log(`${benefit.condition}: ${benefit.benefit}`);
  console.log(`í• ì¸ ê¸ˆì•¡: ${benefit.benefit_value.toLocaleString()}ì›`);
  console.log(`ìµœì†Œ êµ¬ë§¤: ${benefit.min_order_amount.toLocaleString()}ì›`);
});
```

### 2. ë°ì´í„° ë¶„ì„
- í‰ê·  í• ì¸ ê¸ˆì•¡ ê³„ì‚°
- ìµœì†Œ êµ¬ë§¤ ê¸ˆì•¡ë³„ í˜œíƒ ê·¸ë£¹í™”
- ì¿ í° ì¢…ë¥˜ë³„ í†µê³„

### 3. ì•Œë¦¼ ì„œë¹„ìŠ¤
- íŠ¹ì • ê¸ˆì•¡ëŒ€ í˜œíƒ ì•Œë¦¼
- ì‹ ê·œ ì¿ í° ë°œí–‰ ì•Œë¦¼
- í• ì¸ìœ¨ ë³€ë™ ì•Œë¦¼

---

## ğŸ“ ì‹¤í–‰ ë°©ë²•

### ë‹¨ë… ì‹¤í–‰
```bash
cd "/Users/amore/ai_cs ì‹œìŠ¤í…œ/crawler"
python3 naver_shopping_crawler.py
```

### ìŠ¤ì¼€ì¤„ëŸ¬ í†µí•©
`dynamic_scheduler.py`ì— ì´ë¯¸ í†µí•©ë˜ì–´ ìˆì–´ **1ì‹œê°„ë§ˆë‹¤ ìë™ ì‹¤í–‰**ë©ë‹ˆë‹¤:

```python
self.p_platform_crawlers = {
    'NAVER': 'crawl_multi_brands.py',
    'NAVER_SHOPPING': 'naver_shopping_crawler.py',  # âœ… í†µí•©ë¨
    'KAKAO': 'kakao_live_crawler.py',
    # ... ê¸°íƒ€ í”Œë«í¼
}
```

---

## âœ… ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] `__PRELOADED_STATE__` JSON íŒŒì‹± ë¡œì§ êµ¬í˜„
- [x] íƒ€ì´í‹€ ìˆ˜ì§‘ ê°œì„  (JSON ìš°ì„ )
- [x] í˜œíƒ ì •ë³´ ìˆ˜ì§‘ ê°œì„  (JSON ìš°ì„ )
- [x] ì¿ í° ì •ë³´ ìˆ˜ì§‘ ê°œì„  (JSON ìš°ì„ )
- [x] ìƒí’ˆ ì •ë³´ ìˆ˜ì§‘ ê°œì„  (JSON ìš°ì„ )
- [x] í´ë°± ë©”ì»¤ë‹ˆì¦˜ êµ¬í˜„ (HTML íŒŒì‹±)
- [x] Supabase ì €ì¥ í…ŒìŠ¤íŠ¸ ì„±ê³µ
- [x] JSON íŒŒì¼ ì €ì¥ í…ŒìŠ¤íŠ¸ ì„±ê³µ
- [x] ë¡œê¹… ê°•í™” (ë°ì´í„° ì†ŒìŠ¤ í‘œì‹œ)
- [x] ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”

---

## ğŸ‰ ê²°ë¡ 

ë„¤ì´ë²„ ì‡¼í•‘ ì „ì‹œ í˜ì´ì§€ì˜ **"êµ¬ë§¤ ê¸ˆì•¡ëŒ€ë³„ í˜œíƒ"** ì •ë³´ëŠ” ì´ë¯¸ì§€ê°€ ì•„ë‹Œ **`__PRELOADED_STATE__` JSON ë°ì´í„°**ì—ì„œ ì •í™•í•˜ê²Œ ìˆ˜ì§‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°œì„ ëœ í¬ë¡¤ëŸ¬ëŠ”:
- âœ… OCR ë¶ˆí•„ìš”
- âœ… ì •í™•ë„ 95% ì´ìƒ
- âœ… ìƒì„¸ ì •ë³´ ì™„ë²½ ìˆ˜ì§‘ (ê¸ˆì•¡, ì¡°ê±´, ì¿ í° ì¢…ë¥˜ ë“±)
- âœ… ì•ˆì •ì ì¸ í´ë°± ë©”ì»¤ë‹ˆì¦˜
- âœ… Supabase ìë™ ì €ì¥

ìœ¼ë¡œ ìš´ì˜ ì¤‘ì…ë‹ˆë‹¤! ğŸš€

---

**ë¬¸ì˜ì‚¬í•­**: ì¶”ê°€ ìˆ˜ì§‘ í•­ëª©ì´ë‚˜ ê°œì„  ì‚¬í•­ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ë§ì”€í•´ì£¼ì„¸ìš”.
