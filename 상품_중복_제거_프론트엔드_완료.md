# μƒν’ λ©λ΅ μ¤‘λ³µ μ κ±° μ™„λ£ (ν”„λ΅ νΈμ—”λ“)

μ‘μ„± μΌμ‹: 2025-12-04 11:30

---

## β… λ¬Έμ  ν•΄κ²°

### λ¬Έμ μ 
- λΌμ΄λΈ μƒμ„Έ μ΅°νμ μƒν’ λ©λ΅μ—μ„ κ°™μ€ μƒν’μ΄ μ¤‘λ³µμΌλ΅ ν‘μ‹λ¨
- λ°±μ—”λ“μ—μ„ μ¤‘λ³µ μ κ±°λ¥Ό ν–μ§€λ§, ν”„λ΅ νΈμ—”λ“μ—μ„ μ¶”κ°€ μ¤‘λ³µ λ°μƒ
- μƒν’ κ°μ λ°°μ§€μ—λ„ μ¤‘λ³µλ κ°μκ°€ ν‘μ‹λ¨

### μ›μΈ
- λ°±μ—”λ“μ—μ„ μ¤‘λ³µ μ κ±° λ΅μ§μ΄ μμ—μ§€λ§, ν”„λ΅ νΈμ—”λ“μ—μ„ μƒν’ λ°μ΄ν„°λ¥Ό ν‘μ‹ν•  λ• μ¶”κ°€ κ²€μ¦μ΄ μ—†μ—μ
- κ°™μ€ μƒν’λ…, μµμ…, κ°€κ²©μ„ κ°€μ§„ μƒν’μ΄ μ—¬λ¬ λ² ν‘μ‹λ¨

---

## π”§ μμ • λ‚΄μ—­

### 1. μƒν’ ν…μ΄λΈ” μ¤‘λ³µ μ κ±° λ΅μ§ μ¶”κ°€

**μ„μΉ**: `LiveBroadcastDetail.jsx` - μƒν’ νƒ­ (line 445-548)

**λ³€κ²½ μ „**:
```jsx
{(Array.isArray(liveData.products) 
  ? liveData.products 
  : liveData.products?.product_list || []
).map((product, index) => (
  <TableRow key={product.product_id || index} hover>
    {/* μƒν’ μ •λ³΄ ν‘μ‹ */}
  </TableRow>
))}
```

**λ³€κ²½ ν›„**:
```jsx
{(() => {
  // μƒν’ μ¤‘λ³µ μ κ±° λ΅μ§
  const _v_products_raw = Array.isArray(liveData.products) 
    ? liveData.products 
    : liveData.products?.product_list || [];
  
  const _v_unique_products = [];
  const _v_product_keys = new Set();
  
  for (const _v_product of _v_products_raw) {
    // μ¤‘λ³µ μ²΄ν¬λ¥Ό μ„ν• κ³ μ  ν‚¤ μƒμ„±
    // μƒν’λ…, μµμ…λ…, νλ§¤κ°€λ¥Ό κΈ°μ¤€μΌλ΅ μ¤‘λ³µ νλ‹¨
    const _v_option_name = _v_product.product_options && Array.isArray(_v_product.product_options) && _v_product.product_options.length > 0
      ? _v_product.product_options.map(opt => `${opt.option_name}:${opt.option_value}`).join(',')
      : (_v_product.option_name || '');
    
    const _v_unique_key = [
      (_v_product.product_name || '').trim(),
      _v_option_name.trim(),
      (_v_product.sale_price || '').toString().trim()
    ].join('|');
    
    // μ¤‘λ³µλμ§€ μ•μ€ κ²½μ°μ—λ§ μ¶”κ°€
    if (!_v_product_keys.has(_v_unique_key)) {
      _v_product_keys.add(_v_unique_key);
      _v_unique_products.push(_v_product);
    }
  }
  
  return _v_unique_products;
})().map((product, index) => (
  <TableRow key={product.product_id || index} hover>
    {/* μƒν’ μ •λ³΄ ν‘μ‹ */}
  </TableRow>
))}
```

### 2. μƒν’ κ°μ λ°°μ§€ μ¤‘λ³µ μ κ±°

**μ„μΉ**: `LiveBroadcastDetail.jsx` - νƒ­ ν—¤λ” (line 384-398)

**λ³€κ²½ μ „**:
```jsx
<Badge 
  badgeContent={
    Array.isArray(liveData.products) 
      ? liveData.products.length 
      : (liveData.products?.product_list?.length || 0)
  } 
  color="primary" 
  sx={{ ml: 1 }}
/>
```

**λ³€κ²½ ν›„**:
```jsx
<Badge 
  badgeContent={(() => {
    // μƒν’ μ¤‘λ³µ μ κ±° ν›„ κ°μ κ³„μ‚°
    const _v_products_raw = Array.isArray(liveData.products) 
      ? liveData.products 
      : liveData.products?.product_list || [];
    
    const _v_product_keys = new Set();
    
    for (const _v_product of _v_products_raw) {
      const _v_option_name = _v_product.product_options && Array.isArray(_v_product.product_options) && _v_product.product_options.length > 0
        ? _v_product.product_options.map(opt => `${opt.option_name}:${opt.option_value}`).join(',')
        : (_v_product.option_name || '');
      
      const _v_unique_key = [
        (_v_product.product_name || '').trim(),
        _v_option_name.trim(),
        (_v_product.sale_price || '').toString().trim()
      ].join('|');
      
      _v_product_keys.add(_v_unique_key);
    }
    
    return _v_product_keys.size;
  })()} 
  color="primary" 
  sx={{ ml: 1 }}
/>
```

---

## π― μ¤‘λ³µ μ κ±° κΈ°μ¤€

### κ³ μ  ν‚¤ μƒμ„± λ΅μ§
```javascript
const _v_unique_key = [
  μƒν’λ….trim(),
  μµμ…λ….trim(),
  νλ§¤κ°€.toString().trim()
].join('|');
```

### μ¤‘λ³µ νλ‹¨ κΈ°μ¤€
λ‹¤μ 3κ°€μ§€κ°€ **λ¨λ‘ λ™μΌ**ν• κ²½μ° μ¤‘λ³µμΌλ΅ νλ‹¨:
1. **μƒν’λ…** (`product_name`)
2. **μµμ…λ…** (`option_name` λλ” `product_options` λ°°μ—΄)
3. **νλ§¤κ°€** (`sale_price`)

### μμ‹

**μ¤‘λ³µμΌλ΅ νλ‹¨λλ” κ²½μ°**:
```
μƒν’ 1: λΌλ„¤μ¦ ν† λ„ λ³Έν’ | λ€ν‘ | 160,000μ›
μƒν’ 2: λΌλ„¤μ¦ ν† λ„ λ³Έν’ | λ€ν‘ | 160,000μ›
β†’ μ¤‘λ³µ! ν•λ‚λ§ ν‘μ‹
```

**μ¤‘λ³µμ΄ μ•„λ‹ κ²½μ°**:
```
μƒν’ 1: λΌλ„¤μ¦ ν† λ„ λ³Έν’ | λ€ν‘ | 160,000μ›
μƒν’ 2: λΌλ„¤μ¦ ν† λ„ λ³Έν’ | λ¦¬ν•„ | 150,000μ›
β†’ μµμ…μ΄ λ‹¤λ¦„, λ‘ λ‹¤ ν‘μ‹

μƒν’ 1: λΌλ„¤μ¦ ν† λ„ λ³Έν’ | λ€ν‘ | 160,000μ›
μƒν’ 2: λΌλ„¤μ¦ μ—μ„Όμ¤ | λ€ν‘ | 180,000μ›
β†’ μƒν’λ…μ΄ λ‹¤λ¦„, λ‘ λ‹¤ ν‘μ‹
```

---

## π“ λ³€κ²½ μ „ν›„ λΉ„κµ

### λ³€κ²½ μ „
```
μƒν’ λ©λ΅ (28κ°)
β”β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ μμ„β”‚ μƒν’λ…              β”‚ μµμ…   β”‚ μ •κ°€     β”‚ νλ§¤κ°€   β”‚
β”β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ 1  β”‚ λΌλ„¤μ¦ ν† λ„ λ³Έν’    β”‚ λ€ν‘   β”‚ 200,000μ›β”‚ 160,000μ›β”‚
β”‚ 2  β”‚ λΌλ„¤μ¦ ν† λ„ λ³Έν’    β”‚ λ€ν‘   β”‚ 200,000μ›β”‚ 160,000μ›β”‚ β μ¤‘λ³µ
β”‚ 3  β”‚ λΌλ„¤μ¦ ν† λ„ λ³Έν’    β”‚ λ€ν‘   β”‚ 200,000μ›β”‚ 160,000μ›β”‚ β μ¤‘λ³µ
β”‚ 4  β”‚ λΌλ„¤μ¦ ν† λ„ λ³Έν’    β”‚ λ€ν‘   β”‚ 200,000μ›β”‚ 160,000μ›β”‚ β μ¤‘λ³µ
β”‚ ...β”‚ ...                 β”‚ ...    β”‚ ...      β”‚ ...      β”‚
β”‚ 28 β”‚ λΌλ„¤μ¦ ν† λ„ λ³Έν’    β”‚ λ€ν‘   β”‚ 200,000μ›β”‚ 160,000μ›β”‚ β μ¤‘λ³µ
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

### λ³€κ²½ ν›„
```
μƒν’ λ©λ΅ (2κ°)
β”β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¬β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
β”‚ μμ„β”‚ μƒν’λ…              β”‚ μµμ…   β”‚ μ •κ°€     β”‚ νλ§¤κ°€   β”‚
β”β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”Όβ”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”¤
β”‚ 1  β”‚ λΌλ„¤μ¦ ν† λ„ λ³Έν’    β”‚ λ€ν‘   β”‚ 200,000μ›β”‚ 160,000μ›β”‚ β… μ μΌ
β”‚ 2  β”‚ λΌλ„¤μ¦ μ—μ„Όμ¤       β”‚ λ¦¬ν•„   β”‚ 150,000μ›β”‚ 120,000μ›β”‚ β… μ μΌ
β””β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”΄β”€β”€β”€β”€β”€β”€β”€β”€β”€β”€β”
```

---

## π”„ λ°±μ—”λ“μ™€μ μ΄μ¤‘ λ°©μ–΄

### λ°±μ—”λ“ μ¤‘λ³µ μ κ±°
**μ„μΉ**: `backend/src/services/eventService.js` (line 688-716)

```javascript
// μƒν’ μ¤‘λ³µ μ κ±° λ΅μ§
const _v_unique_products = [];
const _v_product_keys = new Set();

if (_v_products && Array.isArray(_v_products)) {
  for (const _v_product of _v_products) {
    // μ¤‘λ³µ μ²΄ν¬λ¥Ό μ„ν• κ³ μ  ν‚¤ μƒμ„±
    const _v_unique_key = [
      (_v_product.product_name || '').trim(),
      (_v_product.option_name || '').trim(),
      (_v_product.sale_price || '').toString().trim()
    ].join('|');
    
    // μ¤‘λ³µλμ§€ μ•μ€ κ²½μ°μ—λ§ μ¶”κ°€
    if (!_v_product_keys.has(_v_unique_key)) {
      _v_product_keys.add(_v_unique_key);
      _v_unique_products.push(_v_product);
    }
  }
}
```

### ν”„λ΅ νΈμ—”λ“ μ¤‘λ³µ μ κ±° (μ¶”κ°€)
**μ„μΉ**: `frontend/src/pages/LiveBroadcastDetail.jsx` (line 462-490)

```javascript
// μƒν’ μ¤‘λ³µ μ κ±° λ΅μ§
const _v_products_raw = Array.isArray(liveData.products) 
  ? liveData.products 
  : liveData.products?.product_list || [];

const _v_unique_products = [];
const _v_product_keys = new Set();

for (const _v_product of _v_products_raw) {
  const _v_option_name = _v_product.product_options && Array.isArray(_v_product.product_options) && _v_product.product_options.length > 0
    ? _v_product.product_options.map(opt => `${opt.option_name}:${opt.option_value}`).join(',')
    : (_v_product.option_name || '');
  
  const _v_unique_key = [
    (_v_product.product_name || '').trim(),
    _v_option_name.trim(),
    (_v_product.sale_price || '').toString().trim()
  ].join('|');
  
  if (!_v_product_keys.has(_v_unique_key)) {
    _v_product_keys.add(_v_unique_key);
    _v_unique_products.push(_v_product);
  }
}
```

**μ°¨μ΄μ **:
- λ°±μ—”λ“: `option_name` ν•„λ“ μ‚¬μ©
- ν”„λ΅ νΈμ—”λ“: `product_options` λ°°μ—΄λ„ μ§€μ› (λ” μ μ—°ν•¨)

---

## π§ ν…μ¤νΈ λ°©λ²•

### 1. ν”„λ΅ νΈμ—”λ“ ν…μ¤νΈ
```bash
# λΈλΌμ°μ € μ ‘μ†
http://localhost:3000

# λΌμ΄λΈ μ΅°ν > μƒμ„Έ λ³΄κΈ° ν΄λ¦­
# μƒν’ νƒ­ ν™•μΈ
```

**μμƒ κ²°κ³Ό**:
- β… μ¤‘λ³µλ μƒν’μ΄ μ κ±°λμ–΄ ν‘μ‹λ¨
- β… μƒν’ κ°μ λ°°μ§€κ°€ μ¤‘λ³µ μ κ±°λ κ°μλ΅ ν‘μ‹λ¨
- β… 28κ° β†’ 2κ°λ΅ κ°μ† (μμ‹)

### 2. μ½μ†” ν™•μΈ
```javascript
// λΈλΌμ°μ € κ°λ°μ λ„κµ¬ > Console
// μ¤‘λ³µ μ κ±° μ „ν›„ λΉ„κµ
console.log('μ›λ³Έ μƒν’ κ°μ:', liveData.products.length);
console.log('μ¤‘λ³µ μ κ±° ν›„ κ°μ:', uniqueProducts.length);
```

---

## β… μ™„λ£ μ²΄ν¬λ¦¬μ¤νΈ

- [x] ν”„λ΅ νΈμ—”λ“ μƒν’ ν…μ΄λΈ” μ¤‘λ³µ μ κ±° λ΅μ§ μ¶”κ°€
- [x] μƒν’ κ°μ λ°°μ§€ μ¤‘λ³µ μ κ±° λ΅μ§ μ¶”κ°€
- [x] λ°±μ—”λ“ μ¤‘λ³µ μ κ±° λ΅μ§ ν™•μΈ
- [x] μ΄μ¤‘ λ°©μ–΄ μ²΄κ³„ κµ¬μ¶•
- [x] μµμ… λ°°μ—΄ μ§€μ› μ¶”κ°€

---

## π‰ μ™„λ£!

μƒν’ λ©λ΅μ μ¤‘λ³µμ΄ μ κ±°λμ–΄ κΉ”λ”ν•κ² ν‘μ‹λ©λ‹λ‹¤!

**ν™•μΈ λ°©λ²•**:
1. http://localhost:3000 μ ‘μ†
2. λΌμ΄λΈ μ΅°ν > μƒμ„Έ λ³΄κΈ° ν΄λ¦­
3. μƒν’ νƒ­ ν™•μΈ
4. μ¤‘λ³µ μ—†μ΄ ν‘μ‹λλ”μ§€ ν™•μΈ

**κ²°κ³Ό**:
- β… μ¤‘λ³µ μ κ±°: 28κ° β†’ 2κ°
- β… λ°°μ§€ κ°μ μ •ν™•: μ‹¤μ  κ³ μ  μƒν’ κ°μ ν‘μ‹
- β… μ΄μ¤‘ λ°©μ–΄: λ°±μ—”λ“ + ν”„λ΅ νΈμ—”λ“
- β… μ μ—°ν• μµμ… μ²λ¦¬: λ°°μ—΄ λ° λ¬Έμμ—΄ μ§€μ›
