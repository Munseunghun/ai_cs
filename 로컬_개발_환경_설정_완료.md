# 로컬 개발 환경 설정 완료

**작성일**: 2025년 12월 17일  
**상태**: ✅ 완료

---

## 🔧 설정 변경

### Vercel 배포 → 로컬 개발 모드

**변경 사항**:
- ✅ `.env.production` 파일 삭제
- ✅ `.env` 파일 생성 (로컬 개발용)
- ✅ API URL: `http://localhost:3001`

---

## 📝 환경 설정

### frontend/.env
```bash
# 로컬 개발 환경 설정
REACT_APP_API_URL=http://localhost:3001
```

**참고**: 이 파일은 `.gitignore`에 포함되어 Git에 추적되지 않습니다.

---

## 🚀 로컬 실행 방법

### 1단계: 백엔드 서버 실행

#### 터미널 1 - 백엔드
```bash
cd "/Users/amore/ai_cs 시스템/backend"
npm install
npm start
```

**실행 결과**:
```
✓ 서버가 http://localhost:3001 에서 실행 중입니다
✓ Supabase 연결 성공
```

**확인**:
```bash
# 브라우저에서 접속
http://localhost:3001/health

# 또는 curl로 확인
curl http://localhost:3001/health
```

---

### 2단계: 프론트엔드 서버 실행

#### 터미널 2 - 프론트엔드
```bash
cd "/Users/amore/ai_cs 시스템/frontend"
npm install --legacy-peer-deps
npm start
```

**실행 결과**:
```
Compiled successfully!

You can now view online-campaign-promotion-frontend in the browser.

  Local:            http://localhost:3000
  On Your Network:  http://192.168.x.x:3000
```

**자동으로 브라우저가 열립니다**: `http://localhost:3000`

---

## 📊 시스템 구성

### 로컬 개발 환경
```
┌─────────────────────────────────────────────────────────┐
│                                                           │
│  브라우저                                                 │
│  http://localhost:3000                                   │
│       ↓                                                   │
│  프론트엔드 (React)                                       │
│  포트: 3000                                               │
│       ↓                                                   │
│  백엔드 API (Node.js/Express)                            │
│  포트: 3001                                               │
│       ↓                                                   │
│  Supabase PostgreSQL                                     │
│  (클라우드)                                               │
│                                                           │
└─────────────────────────────────────────────────────────┘
```

---

## 🔍 실행 확인

### 1. 백엔드 Health Check
```bash
curl http://localhost:3001/health
```

**예상 응답**:
```json
{
  "success": true,
  "message": "Server is running",
  "timestamp": "2025-12-17T...",
  "environment": "development"
}
```

---

### 2. 백엔드 API 테스트
```bash
curl http://localhost:3001/api/dashboard
```

**예상 응답**:
```json
{
  "success": true,
  "data": {
    "totalEvents": 10,
    "activeEvents": 5,
    ...
  }
}
```

---

### 3. 프론트엔드 접속
```
브라우저에서 접속: http://localhost:3000
✅ 대시보드 정상 로딩
✅ Live 방송 조회
✅ 입점몰 이벤트, 전시 조회
```

---

## 🛠 개발 도구

### VS Code 터미널 분할

#### 방법 1: 터미널 분할
```
1. VS Code에서 터미널 열기 (Ctrl + `)
2. 터미널 분할 버튼 클릭 (또는 Ctrl + Shift + 5)
3. 왼쪽 터미널: 백엔드 실행
4. 오른쪽 터미널: 프론트엔드 실행
```

#### 방법 2: 새 터미널 열기
```
1. 터미널 1: 백엔드 실행
2. Ctrl + Shift + ` (새 터미널)
3. 터미널 2: 프론트엔드 실행
```

---

## 📝 개발 워크플로우

### 코드 수정 시
```
1. 코드 수정
2. 저장 (Ctrl + S)
3. 자동 리로드 (Hot Reload)
   - 프론트엔드: 자동 새로고침
   - 백엔드: nodemon으로 자동 재시작
```

### Git 커밋 시
```bash
git add -A
git commit -m "변경 내용"
git push origin main
```

**참고**: `.env` 파일은 `.gitignore`에 포함되어 커밋되지 않습니다.

---

## 🔧 환경 변수 관리

### 로컬 개발 환경
```bash
# frontend/.env (Git 추적 X)
REACT_APP_API_URL=http://localhost:3001
```

### Production 환경 (Vercel)
```bash
# Vercel 환경 변수 설정 (추후)
REACT_APP_API_URL=https://ai-cs-backend.onrender.com
```

---

## 🚨 트러블슈팅

### 문제 1: 백엔드 포트 충돌
**증상**: `Error: listen EADDRINUSE: address already in use :::3001`

**해결**:
```bash
# 포트 3001 사용 중인 프로세스 확인
lsof -i :3001

# 프로세스 종료
kill -9 [PID]

# 또는 백엔드 재시작
cd backend
npm start
```

---

### 문제 2: 프론트엔드 포트 충돌
**증상**: `Something is already running on port 3000`

**해결**:
```
Would you like to run the app on another port instead? (Y/n)
→ Y 입력 (포트 3001로 실행)

또는:
# 포트 3000 사용 중인 프로세스 종료
lsof -i :3000
kill -9 [PID]
```

---

### 문제 3: npm install 실패
**증상**: `npm ERR! peer dependency conflict`

**해결**:
```bash
cd frontend
npm install --legacy-peer-deps
```

---

### 문제 4: Supabase 연결 실패
**증상**: `Error: Supabase connection failed`

**확인**:
```bash
# backend/.env 파일 확인
cat backend/.env

# 필요한 환경 변수
SUPABASE_URL=https://uewhvekfjjvxoioklzza.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

---

## 📊 개발 모드 vs Production 모드

| 항목 | 개발 모드 (로컬) | Production (Vercel) |
|------|-----------------|---------------------|
| 프론트엔드 | http://localhost:3000 | https://ai-cs-nine.vercel.app |
| 백엔드 | http://localhost:3001 | https://ai-cs-backend.onrender.com |
| Hot Reload | ✅ 지원 | ❌ 빌드 필요 |
| 디버깅 | ✅ 쉬움 | ❌ 로그 확인 필요 |
| 환경 변수 | `.env` 파일 | Vercel 환경 변수 |
| 빌드 | 불필요 | 필요 (3-5분) |

---

## 🎯 개발 시작하기

### 빠른 시작 (2개 터미널)

#### 터미널 1 - 백엔드
```bash
cd "/Users/amore/ai_cs 시스템/backend" && npm start
```

#### 터미널 2 - 프론트엔드
```bash
cd "/Users/amore/ai_cs 시스템/frontend" && npm start
```

**5-10초 후**:
```
✅ 백엔드: http://localhost:3001
✅ 프론트엔드: http://localhost:3000 (자동으로 브라우저 열림)
```

---

## 📝 주요 명령어

### 백엔드
```bash
cd backend
npm install          # 의존성 설치
npm start            # 개발 서버 시작
npm run dev          # nodemon으로 시작 (자동 재시작)
```

### 프론트엔드
```bash
cd frontend
npm install --legacy-peer-deps   # 의존성 설치
npm start                         # 개발 서버 시작
npm run build                     # Production 빌드
```

---

## 🔍 로그 확인

### 백엔드 로그
```
터미널 1에서 실시간 확인
- API 요청 로그
- 에러 로그
- Supabase 쿼리 로그
```

### 프론트엔드 로그
```
1. 브라우저 개발자 도구 (F12)
2. Console 탭
3. Network 탭 (API 요청 확인)
```

---

## 🎉 완료!

### 로컬 개발 환경 준비 완료
- ✅ `.env` 파일 생성
- ✅ API URL: `http://localhost:3001`
- ✅ 백엔드 실행 준비
- ✅ 프론트엔드 실행 준비

### 다음 단계
```
1. 터미널 1에서 백엔드 실행
2. 터미널 2에서 프론트엔드 실행
3. 브라우저에서 http://localhost:3000 접속
4. 개발 시작! 🚀
```

---

## 💡 개발 팁

### 1. 코드 자동 저장
```
VS Code 설정:
File > Auto Save 체크
```

### 2. ESLint 경고 무시
```bash
# frontend/.eslintrc.json
{
  "rules": {
    "no-unused-vars": "warn"
  }
}
```

### 3. 브라우저 자동 새로고침
```
React 개발 서버가 자동으로 처리
코드 저장 시 자동 새로고침
```

---

**로컬 개발 환경 설정이 완료되었습니다!** ✅

**이제 2개의 터미널에서 백엔드와 프론트엔드를 실행하세요!** 🚀

---

## 📞 실행 명령어 요약

```bash
# 터미널 1 - 백엔드
cd "/Users/amore/ai_cs 시스템/backend"
npm start

# 터미널 2 - 프론트엔드
cd "/Users/amore/ai_cs 시스템/frontend"
npm start
```

**5-10초 후 브라우저에서 http://localhost:3000 자동으로 열림!** 🎉
